"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[7807],{3425(n){n.exports=JSON.parse('{"permalink":"/blog/spring-boot-custom-session-authentication","source":"@site/blog/posts/pring-boot-custom-session-authentication.md","title":"Spring Boot\uc5d0\uc11c Session \uc778\uc99d\uc744 \ucee4\uc2a4\ud140\ud558\ub294 \uc774\uc720\uc640 \uc2e4\uc804 \uad6c\ud604","description":"\\"\uc65c Spring Security\uc758 \uae30\ubcf8 Form Login\uc744 \uc4f0\uc9c0 \uc54a\uace0 \uc9c1\uc811 \uad6c\ud604\ud560\uae4c?\\"","date":"2025-04-15T00:00:00.000Z","tags":[],"hasTruncateMarker":true,"authors":[],"frontMatter":{"slug":"spring-boot-custom-session-authentication","title":"Spring Boot\uc5d0\uc11c Session \uc778\uc99d\uc744 \ucee4\uc2a4\ud140\ud558\ub294 \uc774\uc720\uc640 \uc2e4\uc804 \uad6c\ud604","date":"2025-04-15T00:00:00.000Z","categories":["Spring Boot","Security","Backend"],"tags":[]},"unlisted":false,"prevItem":{"title":"\ubcf5\uc7a1\ud55c \uac80\uc0c9 \ucffc\ub9ac, JPA vs MyBatis \uc131\ub2a5 \ube44\uad50\uc640 \ud558\uc774\ube0c\ub9ac\ub4dc \uc804\ub7b5","permalink":"/blog/jpa-mybatis-hybrid-strategy"},"nextItem":{"title":"\uae30\ub85d \ube14\ub85c\uadf8","permalink":"/blog/index"}}')},8453(n,e,r){r.d(e,{R:()=>o,x:()=>c});var s=r(6540);const i={},t=s.createContext(i);function o(n){const e=s.useContext(t);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:o(n.components),s.createElement(t.Provider,{value:e},n.children)}},9965(n,e,r){r.r(e),r.d(e,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>a});var s=r(3425),i=r(4848),t=r(8453);const o={slug:"spring-boot-custom-session-authentication",title:"Spring Boot\uc5d0\uc11c Session \uc778\uc99d\uc744 \ucee4\uc2a4\ud140\ud558\ub294 \uc774\uc720\uc640 \uc2e4\uc804 \uad6c\ud604",date:new Date("2025-04-15T00:00:00.000Z"),categories:["Spring Boot","Security","Backend"],tags:[]},c="Spring Boot\uc5d0\uc11c Session \uc778\uc99d\uc744 \ucee4\uc2a4\ud140\ud558\ub294 \uc774\uc720\uc640 \uc2e4\uc804 \uad6c\ud604",l={authorsImageUrls:[]},a=[{value:"1. \uc65c \ucee4\uc2a4\ud140 \uc138\uc158 \uc778\uc99d?",id:"1-\uc65c-\ucee4\uc2a4\ud140-\uc138\uc158-\uc778\uc99d",level:2},{value:"\ud504\ub85c\uc81d\ud2b8 \uc694\uad6c\uc0ac\ud56d",id:"\ud504\ub85c\uc81d\ud2b8-\uc694\uad6c\uc0ac\ud56d",level:3},{value:"\ud45c\uc900 FormLogin\uc758 \ud55c\uacc4",id:"\ud45c\uc900-formlogin\uc758-\ud55c\uacc4",level:3},{value:"\ud574\uacb0 \ubc29\uc548: Controller + SessionAuthenticationStrategy \uc870\ud569",id:"\ud574\uacb0-\ubc29\uc548-controller--sessionauthenticationstrategy-\uc870\ud569",level:3},{value:"2. \uc778\uc99d \uad6c\ud604",id:"2-\uc778\uc99d-\uad6c\ud604",level:2},{value:"\uc804\uccb4 \uc778\uc99d \ud50c\ub85c\uc6b0",id:"\uc804\uccb4-\uc778\uc99d-\ud50c\ub85c\uc6b0",level:3},{value:"\ub2e8\uacc4\ubcc4 \uc124\uba85",id:"\ub2e8\uacc4\ubcc4-\uc124\uba85",level:3},{value:"3. \ud575\uc2ec \ucef4\ud3ec\ub10c\ud2b8 \uad6c\ud604",id:"3-\ud575\uc2ec-\ucef4\ud3ec\ub10c\ud2b8-\uad6c\ud604",level:2},{value:"<strong>\uac01 \ucef4\ud3ec\ub10c\ud2b8\uc758 \uc5ed\ud560</strong>",id:"\uac01-\ucef4\ud3ec\ub10c\ud2b8\uc758-\uc5ed\ud560",level:3},{value:"1) User Entity",id:"1-user-entity",level:3},{value:"<code>equals</code>/<code>hashCode</code>\ub97c \uc624\ubc84\ub77c\uc774\ub529 \ud558\ub294 \uc774\uc720",id:"equalshashcode\ub97c-\uc624\ubc84\ub77c\uc774\ub529-\ud558\ub294-\uc774\uc720",level:4},{value:"2) LoginService",id:"2-loginservice",level:3},{value:"1) \ub85c\uadf8\uc778 \uba54\uc778 \ub85c\uc9c1",id:"1-\ub85c\uadf8\uc778-\uba54\uc778-\ub85c\uc9c1",level:4},{value:"2) Spring Security \uc778\uc99d \uc218\ud589",id:"2-spring-security-\uc778\uc99d-\uc218\ud589",level:4},{value:"3) SessionConfig - \uc138\uc158 \uc815\ucc45 \uc124\uc815",id:"3-sessionconfig---\uc138\uc158-\uc815\ucc45-\uc124\uc815",level:3},{value:"4) SecurityFilterChain \uc124\uc815",id:"4-securityfilterchain-\uc124\uc815",level:3},{value:"4. \ub3d9\uc791 \uac80\uc99d",id:"4-\ub3d9\uc791-\uac80\uc99d",level:2},{value:"5. \uc815\ub9ac",id:"5-\uc815\ub9ac",level:2},{value:"\ud575\uc2ec \uc694\uc57d",id:"\ud575\uc2ec-\uc694\uc57d",level:3},{value:"\ud2b8\ub808\uc774\ub4dc\uc624\ud504",id:"\ud2b8\ub808\uc774\ub4dc\uc624\ud504",level:3}];function d(n){const e={blockquote:"blockquote",br:"br",code:"code",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:'"\uc65c Spring Security\uc758 \uae30\ubcf8 Form Login\uc744 \uc4f0\uc9c0 \uc54a\uace0 \uc9c1\uc811 \uad6c\ud604\ud560\uae4c?"'}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\uc774 \uae00\uc5d0\uc11c\ub294 ",(0,i.jsx)(e.strong,{children:"Admin/Customer \ud1b5\ud569 \ud658\uacbd"}),"\uc5d0\uc11c ",(0,i.jsx)(e.strong,{children:"JSON \uae30\ubc18 \ub85c\uadf8\uc778 + \uc911\ubcf5 \ub85c\uadf8\uc778 \uc81c\uc5b4"}),"\ub97c \uad6c\ud604\ud558\uba70 \uacaa\uc5c8\ub358 ",(0,i.jsx)(e.strong,{children:"\ud45c\uc900 \ubc29\uc2dd\uc73c\ub85c\ub294 \uc548 \ub418\ub294 \uc774\uc720"}),"\uc640 ",(0,i.jsx)(e.strong,{children:"\uc5b4\ub5bb\uac8c \uc6b0\ud68c\ud588\ub294\uc9c0"}),"\ub97c \uae30\ub85d\ud569\ub2c8\ub2e4."]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"1-\uc65c-\ucee4\uc2a4\ud140-\uc138\uc158-\uc778\uc99d",children:"1. \uc65c \ucee4\uc2a4\ud140 \uc138\uc158 \uc778\uc99d?"}),"\n",(0,i.jsx)(e.h3,{id:"\ud504\ub85c\uc81d\ud2b8-\uc694\uad6c\uc0ac\ud56d",children:"\ud504\ub85c\uc81d\ud2b8 \uc694\uad6c\uc0ac\ud56d"}),"\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"\ud56d\ubaa9"}),(0,i.jsx)(e.th,{children:"\uc694\uad6c\uc0ac\ud56d"}),(0,i.jsx)(e.th,{children:"\ud45c\uc900 FormLogin \uac00\ub2a5 \uc5ec\ubd80"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"JSON \uae30\ubc18 \ub85c\uadf8\uc778"})}),(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:'{"email": "...", "password": "..."}'})}),(0,i.jsx)(e.td,{children:"\ubcf5\uc7a1"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"\uc911\ubcf5 \ub85c\uadf8\uc778 \uc81c\uc5b4"})}),(0,i.jsx)(e.td,{children:"\ub3d9\uc77c \uacc4\uc815 1\uba85\ub9cc \ub85c\uadf8\uc778 \ud5c8\uc6a9"}),(0,i.jsx)(e.td,{children:"\uac00\ub2a5"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"\uacc4\uc815 \uc7a0\uae08 \ucc98\ub9ac"})}),(0,i.jsx)(e.td,{children:"5\ud68c \uc2e4\ud328 \uc2dc \uacc4\uc815 \uc7a0\uae40"}),(0,i.jsx)(e.td,{children:"\ucee4\uc2a4\ud140 \ud544\uc694"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"\uccab \ub85c\uadf8\uc778 \uccb4\ud06c"})}),(0,i.jsx)(e.td,{children:"\uccab \ub85c\uadf8\uc778 \uc2dc \ube44\ubc00\ubc88\ud638 \ubcc0\uacbd \uac15\uc81c"}),(0,i.jsx)(e.td,{children:"\ucee4\uc2a4\ud140 \ud544\uc694"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"\ud0c0\uc785\ubcc4 \uc751\ub2f5"})}),(0,i.jsx)(e.td,{children:"Admin/Customer\ubcc4 \ub2e4\ub978 \uc751\ub2f5"}),(0,i.jsx)(e.td,{children:"\ucee4\uc2a4\ud140 \ud544\uc694"})]})]})]}),"\n",(0,i.jsx)(e.h3,{id:"\ud45c\uc900-formlogin\uc758-\ud55c\uacc4",children:"\ud45c\uc900 FormLogin\uc758 \ud55c\uacc4"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Spring Security\uc758 \uae30\ubcf8 FormLogin \ud544\ud130 \uccb4\uc778:"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-text",children:"UsernamePasswordAuthenticationFilter\r\n    \u2192 AuthenticationManager\r\n    \u2192 UserDetailsService (\uc0ac\uc6a9\uc790 \uc870\ud68c)\r\n    \u2192 SuccessHandler / FailureHandler\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\ubb38\uc81c\uc810:"})}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\ud544\ud130 \ub2e8\uacc4\uc5d0\uc11c\ub294 \ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c1 \uc8fc\uc785\uc774 \ubcf5\uc7a1"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\ud544\ud130 \uae30\ubc18 \uc778\uc99d\uc740 \ucee4\uc2a4\ud130\ub9c8\uc774\uc9d5\uc774 \uc5b4\ub835\uace0, \ud2b9\ud788 AuthenticationFailureHandler\ub9cc\uc73c\ub85c\ub294 DB \uc0c1\ud0dc \ubcc0\uacbd(\uc7a0\uae08 \ub4f1)\uc744 \ucc98\ub9ac\ud558\uae30 \uc9c1\uad00\uc801\uc774\uc9c0 \uc54a\uc74c."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\uc2e4\ud328 \uce74\uc6b4\ud2b8\ub97c \uc5b4\ub514\uc11c \uad00\ub9ac\ud560\uae4c?"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\ud544\ud130\ub294 Stateless\ud558\ubbc0\ub85c DB \uc5c5\ub370\uc774\ud2b8 \ub85c\uc9c1\uc744 \ub07c\uc6cc\ub123\uae30 \uc560\ub9e4\ud568"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\uccab \ub85c\uadf8\uc778 \uccb4\ud06c\ub294 \uc778\uc99d \uc131\uacf5 \uc774\ud6c4\uc5d0 \ud310\ub2e8\ud574\uc57c \ud568"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\ud544\ud130 \uccb4\uc778\uc5d0\uc11c\ub294 \uc21c\uc11c\uc0c1 \uc5b4\uc0c9\ud568"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"\ud574\uacb0-\ubc29\uc548-controller--sessionauthenticationstrategy-\uc870\ud569",children:"\ud574\uacb0 \ubc29\uc548: Controller + SessionAuthenticationStrategy \uc870\ud569"}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"\ud544\ud130\ub97c \uc6b0\ud68c\ud558\uc5ec Controller\uc5d0\uc11c \ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c1\uc744 \uc120\ud589 \ucc98\ub9ac\ud558\ub418,\r\n\uc778\uc99d \uacb0\uacfc\ub294 Security\uc758 \ud45c\uc900 \ucef4\ud3ec\ub10c\ud2b8\ub97c \uc774\uc6a9\ud574 \uc138\uc158 \uc2dc\uc2a4\ud15c\uc5d0 \ub4f1\ub85d\r\n\uc218\ub3d9\uc73c\ub85c Authentication \uac1d\uccb4\ub97c \uc0dd\uc131\ud558\uace0,\r\nSecurityContextRepository\ub97c \ud1b5\ud574 \uc138\uc158\uc5d0 \uc601\uc18d\ud654\ud558\ub294 \uc77c\ub828\uc758 \uacfc\uc815\uc744 \ucf54\ub4dc\ub85c \uad6c\ud604"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"[\uae30\uc874] Filter Chain \ubc29\uc2dd"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"Request \u2192 Filter \u2192 AuthenticationManager \u2192 Response\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"[\uac1c\uc120] Controller \ubc29\uc2dd"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-text",children:"Request \u2192 Controller \u2192 Service (\ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c1)\r\n\r\n    \u2192 \uc218\ub3d9\uc73c\ub85c AuthenticationManager \ud638\ucd9c\r\n    \u2192 SessionAuthenticationStrategy \ud638\ucd9c\r\n    \u2192 SecurityContext \uc800\uc7a5 \u2192 Response\n"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Spring Security\uc758 \uc138\uc158 \uc815\ucc45\uc744 \uadf8\ub300\ub85c \ud65c\uc6a9\ud558\ub294 \ubc29\uc548"})}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"2-\uc778\uc99d-\uad6c\ud604",children:"2. \uc778\uc99d \uad6c\ud604"}),"\n",(0,i.jsx)(e.h3,{id:"\uc804\uccb4-\uc778\uc99d-\ud50c\ub85c\uc6b0",children:"\uc804\uccb4 \uc778\uc99d \ud50c\ub85c\uc6b0"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"1. [Client] Request\r\n    \u2193\r\n2. [Controller] \uc694\uccad \uc218\uc2e0\r\n    \u2193\r\n3. [LoginService] \uac80\uc99d\r\n\t\t3.1 \uc0ac\uc6a9\uc790 \ud655\uc778\r\n\t\t3.2 \uacc4\uc815 \ud65c\uc131 \uc5ec\ubd80\r\n\t\t3.3 \ube44\ubc00\ubc88\ud638 \uac80\uc99d\r\n\t\t3.4 \uccab \ub85c\uadf8\uc778 \uac80\uc99d\r\n    \u2193\r\n4. [performSecurityAuthentication]\r\n\t\t4.1 AuthenticationManager.authenticate() \ud638\ucd9c\r\n\t\t4.2 SessionAuthenticationStrategy.onAuthentication() \ud638\ucd9c\r\n\t\t\t\t4.2.1) \uc911\ubcf5 \uc138\uc158 \uc81c\uc5b4 | \uc138\uc158 \uace0\uc815 \uacf5\uaca9 \ubc29\uc9c0 |\r\n\t\t\t\t4.2.2) SessionRegistry \ub4f1\ub85d\r\n\t\t4.3 SecurityContext \uc0dd\uc131 \ubc0f \uc124\uc815\r\n\t\t4.4 HttpSession\uc5d0 SecurityContext \uc800\uc7a5\r\n    \u2193\r\n5. [Response]\n"})}),"\n",(0,i.jsx)(e.h3,{id:"\ub2e8\uacc4\ubcc4-\uc124\uba85",children:"\ub2e8\uacc4\ubcc4 \uc124\uba85"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1\ub2e8\uacc4: \uc0ac\uc6a9\uc790 \uc694\uccad \uc218\uc2e0"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@PostMapping("/login")\r\npublic ResponseEntity login(@RequestBody LoginDto req) {\r\n    // Controller\uc5d0\uc11c \uc9c1\uc811 \ucc98\ub9ac\r\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2\ub2e8\uacc4: \ube44\uc988\ub2c8\uc2a4 \uac80\uc99d (LoginService)"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'if (user.isLocked()) {\r\n    throw new AccountLockedException("\uacc4\uc815\uc774 \uc7a0\uacbc\uc2b5\ub2c8\ub2e4.");\r\n}\r\n\r\nif (user.isFirstLogin()) {\r\n    return new FirstLoginResponse("\ube44\ubc00\ubc88\ud638\ub97c \ubcc0\uacbd\ud558\uc138\uc694.");\r\n}\r\n\r\nif (!passwordEncoder.matches(req.getPassword(), user.getPassword())) {\r\n    user.incrementFailCount();\r\n    if (user.getFailCount() >= 5) {\r\n        user.lock();\r\n    }\r\n    userRepository.save(user);\r\n    throw new BadCredentialsException("\uc544\uc774\ub514 \ub610\ub294 \ube44\ubc00\ubc88\ud638 \ud2c0\ub838\uc2b5\ub2c8\ub2e4.");\r\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"3\ub2e8\uacc4: Spring Security \uc778\uc99d \uc2e4\ud589"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"// AuthenticationManager\ub97c \uc218\ub3d9\uc73c\ub85c \ud638\ucd9c\r\nUsernamePasswordAuthenticationToken authToken =\r\n    new UsernamePasswordAuthenticationToken(\r\n        req.getEmail(),\r\n        req.getPassword(),\r\n        user.getAuthorities()\r\n    );\r\nAuthentication authentication = authenticationManager.authenticate(authToken);\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"4\ub2e8\uacc4: \uc138\uc158 \uc815\ucc45 \uc801\uc6a9"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"// SessionAuthenticationStrategy \uc218\ub3d9 \ud638\ucd9c\r\nsessionAuthenticationStrategy.onAuthentication(authentication, request, response);\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"5\ub2e8\uacc4: SecurityContext \uc800\uc7a5"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"SecurityContext context = securityContextHolderStrategy.createEmptyContext();\r\ncontext.setAuthentication(authentication);\r\nSecurityContextHolder.setContext(context);\r\nsecurityContextRepository.saveContext(context, request, response);\n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"3-\ud575\uc2ec-\ucef4\ud3ec\ub10c\ud2b8-\uad6c\ud604",children:"3. \ud575\uc2ec \ucef4\ud3ec\ub10c\ud2b8 \uad6c\ud604"}),"\n",(0,i.jsx)(e.h3,{id:"\uac01-\ucef4\ud3ec\ub10c\ud2b8\uc758-\uc5ed\ud560",children:(0,i.jsx)(e.strong,{children:"\uac01 \ucef4\ud3ec\ub10c\ud2b8\uc758 \uc5ed\ud560"})}),"\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"\ucef4\ud3ec\ub10c\ud2b8"}),(0,i.jsx)(e.th,{children:"\uc5ed\ud560"}),(0,i.jsx)(e.th,{children:"\uc2e4\ubb34 \uc758\ubbf8"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:"HttpSessionEventPublisher"})}),(0,i.jsx)(e.td,{children:"\uc138\uc158 \uc0dd\uc131/\uc0ad\uc81c \uc774\ubca4\ud2b8\ub97c Spring Security\uc5d0 \uc804\ub2ec"}),(0,i.jsx)(e.td,{children:"\ub85c\uadf8\uc544\uc6c3/\ud0c0\uc784\uc544\uc6c3 \uc2dc SessionRegistry \uc790\ub3d9 \uc815\ub9ac"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:"SessionRegistry"})}),(0,i.jsx)(e.td,{children:"\uc138\uc158 \ubc0f \uc0ac\uc6a9\uc790 \uc0c1\ud0dc \uad00\ub9ac"}),(0,i.jsx)(e.td,{children:'Admin UI\uc5d0\uc11c "\ud604\uc7ac \uc811\uc18d \uc911\uc778 \uc0ac\uc6a9\uc790" \ubaa9\ub85d \ud655\uc778 \uac00\ub2a5'})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:(0,i.jsx)(e.code,{children:"SessionAuthenticationStrategy"})}),(0,i.jsx)(e.td,{children:"\uc138\uc158 \uc815\ucc45 \uccb4\uc778"}),(0,i.jsx)(e.td,{children:"\uc911\ubcf5 \ub85c\uadf8\uc778 \uc81c\uc5b4 + \uc138\uc158 \uace0\uc815 \uacf5\uaca9 \ubc29\uc9c0 + \uc138\uc158 \ub4f1\ub85d"})]})]})]}),"\n",(0,i.jsx)(e.h3,{id:"1-user-entity",children:"1) User Entity"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Entity\r\n@Table(name = "users")\r\n@EqualsAndHashCode(of = "email", callSuper = false)\r\n@NoArgsConstructor(access = AccessLevel.PROTECTED)\r\npublic class User implements UserDetails {\r\n    //...\r\n}\n'})}),"\n",(0,i.jsxs)(e.h4,{id:"equalshashcode\ub97c-\uc624\ubc84\ub77c\uc774\ub529-\ud558\ub294-\uc774\uc720",children:[(0,i.jsx)(e.code,{children:"equals"}),"/",(0,i.jsx)(e.code,{children:"hashCode"}),"\ub97c \uc624\ubc84\ub77c\uc774\ub529 \ud558\ub294 \uc774\uc720"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["Spring Security\uc758 ",(0,i.jsx)(e.code,{children:"SessionRegistry"}),"\ub294 ",(0,i.jsx)(e.strong,{children:"\ub3d9\uc77c \uc0ac\uc6a9\uc790\uc758 \uc138\uc158\uc744 \ucd94\uc801"}),"\ud558\uae30 \uc704\ud574"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["\ub0b4\ubd80\uc801\uc73c\ub85c ",(0,i.jsx)(e.code,{children:"Map<Object, Set<SessionInformation>>"}),"\uc744 \uc0ac\uc6a9\ud558\uae30 \ub54c\ubb38\uc5d0 ",(0,i.jsx)(e.code,{children:"equals"}),"/",(0,i.jsx)(e.code,{children:"hashCode"}),"\ub97c \uc624\ubc84\ub77c\uc774\ub529\ud574 \ud574\uc57c \ud568"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"// SessionRegistryImpl \ub0b4\ubd80\r\nprivate final ConcurrentMap> principals = new ConcurrentHashMap<>();\r\n\r\npublic void registerNewSession(String sessionId, Object principal) {\r\nSet sessions = principals.get(principal);\r\n// \uc5ec\uae30\uc11c principal.equals()\ub85c \ub3d9\uc77c \uc0ac\uc6a9\uc790 \ud310\ub2e8\r\n}\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"equals"}),"\ub97c \uc624\ubc84\ub77c\uc774\ub529\ud558\uc9c0 \uc54a\uc73c\uba74: ",(0,i.jsx)(e.strong,{children:"\uac1d\uccb4 \ucc38\uc870 \ube44\uad50"}),"\ub85c \ub3d9\uc791"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:"SessionRegistry\uc5d0 \uac19\uc740 \uc0ac\uc6a9\uc790\uac00 \uc5ec\ub7ec \ubc88 \ub4f1\ub85d\ub418\uc5b4, \uc911\ubcf5 \ub85c\uadf8\uc778 \uc81c\uc5b4 X"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"2-loginservice",children:"2) LoginService"}),"\n",(0,i.jsx)(e.h4,{id:"1-\ub85c\uadf8\uc778-\uba54\uc778-\ub85c\uc9c1",children:"1) \ub85c\uadf8\uc778 \uba54\uc778 \ub85c\uc9c1"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'    @Transactional\r\n    public LoginResponse login(LoginDto req, HttpServletRequest request,\r\n                                HttpServletResponse response) {\r\n\r\n        // 1. \uc0ac\uc6a9\uc790 \uc870\ud68c\r\n        User user = userRepository.findByEmail(req.getEmail())\r\n            .orElseThrow(() -> new UsernameNotFoundException("\uc0ac\uc6a9\uc790\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."));\r\n\r\n        // 2. \uacc4\uc815 \uc7a0\uae40 \uccb4\ud06c\r\n        if (user.isLocked()) {\r\n            throw new AccountLockedException("\uacc4\uc815\uc774 \uc7a0\uacbc\uc2b5\ub2c8\ub2e4. \uad00\ub9ac\uc790\uc5d0\uac8c \ubb38\uc758\ud558\uc138\uc694.");\r\n        }\r\n\r\n        // 3. \uacc4\uc815 \ud65c\uc131\ud654 \uccb4\ud06c\r\n        if (!user.isEnabled()) {\r\n            throw new DisabledException("\ube44\ud65c\uc131\ud654\ub41c \uacc4\uc815\uc785\ub2c8\ub2e4.");\r\n        }\r\n\r\n        // 4. \ube44\ubc00\ubc88\ud638 \uac80\uc99d\r\n        if (!passwordEncoder.matches(req.getPassword(), user.getPassword())) {\r\n            user.incrementFailCount();\r\n            userRepository.save(user);\r\n\r\n            if (user.isLocked()) {\r\n                throw new AccountLockedException(\r\n                    "5\ud68c \uc2e4\ud328\ub85c \uacc4\uc815\uc774 \uc7a0\uacbc\uc2b5\ub2c8\ub2e4. \uad00\ub9ac\uc790\uc5d0\uac8c \ubb38\uc758\ud558\uc138\uc694."\r\n                );\r\n            }\r\n\r\n            throw new BadCredentialsException(\r\n                String.format("\uc544\uc774\ub514 \ub610\ub294 \ube44\ubc00\ubc88\ud638\uac00 \ud2c0\ub838\uc2b5\ub2c8\ub2e4. (\ub0a8\uc740 \uc2dc\ub3c4: %d\ud68c)",\r\n                              5 - user.getFailCount())\r\n            );\r\n        }\r\n\r\n        // 5. \uccab \ub85c\uadf8\uc778 \uccb4\ud06c\r\n        if (user.isFirstLogin()) {\r\n            return LoginResponse.firstLogin("\ube44\ubc00\ubc88\ud638\ub97c \ubcc0\uacbd\ud574\uc57c \ud569\ub2c8\ub2e4.");\r\n        }\r\n\r\n        // 6. Spring Security \uc778\uc99d \uc2e4\ud589\r\n        performSecurityAuthentication(req, user, request, response);\r\n\r\n        // 7. \ub85c\uadf8\uc778 \uc131\uacf5 \ucc98\ub9ac\r\n        user.resetFailCount();\r\n        userRepository.save(user);\r\n\r\n        return LoginResponse.success(user);\r\n    }\n'})}),"\n",(0,i.jsx)(e.h4,{id:"2-spring-security-\uc778\uc99d-\uc218\ud589",children:"2) Spring Security \uc778\uc99d \uc218\ud589"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"    private void performSecurityAuthentication(LoginDto req, User user,\r\n                                                HttpServletRequest request,\r\n                                                HttpServletResponse response) {\r\n\r\n        // 1. AuthenticationManager\ub97c \ud1b5\ud55c \uc778\uc99d\r\n        UsernamePasswordAuthenticationToken authToken =\r\n            new UsernamePasswordAuthenticationToken(\r\n                req.getEmail(),\r\n                req.getPassword(),\r\n                user.getAuthorities()\r\n            );\r\n\r\n        Authentication authentication = authenticationManager.authenticate(authToken);\r\n\r\n        // 2. SessionAuthenticationStrategy \ud638\ucd9c (\uc138\uc158 \uc815\ucc45 \uc801\uc6a9) \u2192 SessionRegistry \ub4f1\ub85d\r\n        sessionAuthenticationStrategy.onAuthentication(authentication, request, response);\r\n\r\n        // 3. SecurityContext \uc0dd\uc131 \ubc0f \uc124\uc815\r\n        SecurityContext context = securityContextHolderStrategy.createEmptyContext();\r\n        context.setAuthentication(authentication);\r\n        SecurityContextHolder.setContext(context);\r\n\r\n        // 4. SecurityContextRepository\uc5d0 \uc800\uc7a5 (HttpSession\uc5d0 \uc800\uc7a5\ub428)\r\n        securityContextRepository.saveContext(context, request, response);\r\n    }\n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"3-sessionconfig---\uc138\uc158-\uc815\ucc45-\uc124\uc815",children:"3) SessionConfig - \uc138\uc158 \uc815\ucc45 \uc124\uc815"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1) HttpSessionEventPublisher"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"\uc138\uc158 \uc0dd\uc131/\uc0ad\uc81c \uc774\ubca4\ud2b8\ub97c Spring Security\uc5d0 \uc804\ub2ec"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"    public HttpSessionEventPublisher httpSessionEventPublisher() {\r\n        return new HttpSessionEventPublisher() {\r\n            @Override\r\n            public void sessionCreated(HttpSessionEvent event) {\r\n                super.sessionCreated(event);\r\n            }\r\n\r\n            @Override\r\n            public void sessionDestroyed(HttpSessionEvent event) {\r\n                super.sessionDestroyed(event);\r\n            }\r\n        };\r\n    }\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2) \uc11c\ube14\ub9bf \ub9ac\uc2a4\ub108\uc5d0 \ub4f1\ub85d (\uc815\uc0c1 \ub3d9\uc791 \ubcf4\uc7a5)"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"(1)HttpSessionEventPublisher"}),"\uc744 ServletListener\uc5d0 \ub4f1\ub85d\ud574\uc57c \ub85c\uadf8\uc544\uc6c3 \uc2dc SessionRegistry\uc5d0\uc11c \uc138\uc158\uc774 \uc81c\uac70\ub428\r\n\ud558\uc9c0 \uc54a\uc744 \uacbd\uc6b0, \uc138\uc158\uc774 \ub204\uc801"]}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"    public ServletListenerRegistrationBean\r\n            httpSessionEventPublisherRegistration() {\r\n        return new ServletListenerRegistrationBean<>(httpSessionEventPublisher());\r\n    }\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"3) SessionRegistry"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"\uc138\uc158 \ubc0f \uc0ac\uc6a9\uc790 \uc0c1\ud0dc \uad00\ub9ac \ud575\uc2ec \ucef4\ud3ec\ub10c\ud2b8"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"    public SessionRegistry sessionRegistry() {\r\n        return new SessionRegistryImpl() {\r\n            @Override\r\n            public void registerNewSession(String sessionId, Object principal) {\r\n                super.registerNewSession(sessionId, principal);\r\n            }\r\n\r\n            @Override\r\n            public void removeSessionInformation(String sessionId) {\r\n                SessionInformation info = getSessionInformation(sessionId);\r\n                super.removeSessionInformation(sessionId);\r\n            }\r\n\r\n            private String extractPrincipalName(Object principal) {\r\n                if (principal instanceof User) {\r\n                    return ((User) principal).getEmail();\r\n                }\r\n                return principal.toString();\r\n            }\r\n        };\r\n    }\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"4) SessionAuthenticationStrategy"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"\uc778\uc99d \uc131\uacf5 \uc2dc \uc791\ub3d9\ud558\ub294 \uc138\uc158 \uc815\ucc45"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"    public SessionAuthenticationStrategy sessionAuthenticationStrategy(\r\n            SessionRegistry sessionRegistry) {\r\n\r\n        // 3-1) \ub3d9\uc2dc \ub85c\uadf8\uc778 \uac1c\uc218 \uc81c\ud55c\r\n        ConcurrentSessionControlAuthenticationStrategy concurrentControl =\r\n            new ConcurrentSessionControlAuthenticationStrategy(sessionRegistry);\r\n        concurrentControl.setMaximumSessions(1);  // \ub3d9\uc77c \uacc4\uc815 1\uba85\ub9cc\r\n        concurrentControl.setExceptionIfMaximumExceeded(false);  // \uae30\uc874 \uc138\uc158 \ub9cc\ub8cc\r\n\r\n        // 3-2) \uc138\uc158 \uace0\uc815 \uacf5\uaca9 \ubc29\uc9c0 (\uc138\uc158 ID \uc7ac\ubc1c\uae09)\r\n        SessionFixationProtectionStrategy sessionFixation =\r\n            new SessionFixationProtectionStrategy();\r\n        sessionFixation.setMigrateSessionAttributes(true);\r\n\r\n        // 3-3) SessionRegistry\uc5d0 \uc138\uc158 \ub4f1\ub85d\r\n        RegisterSessionAuthenticationStrategy registerSession =\r\n            new RegisterSessionAuthenticationStrategy(sessionRegistry);\r\n\r\n        // 3\uac00\uc9c0 \uc804\ub7b5\uc744 Composite\ub85c \ud1b5\ud569\r\n        return new CompositeSessionAuthenticationStrategy(Arrays.asList(\r\n            concurrentControl,\r\n            sessionFixation,\r\n            registerSession\r\n        ));\r\n    }\n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"4-securityfilterchain-\uc124\uc815",children:"4) SecurityFilterChain \uc124\uc815"}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:'\ucee8\ud2b8\ub864\ub7ec\ub294 "\ub85c\uadf8\uc778 \uc2dc \ub531 \ud55c \ubc88 \uc2e4\ud589"\ub418\uc5b4 "\uc138\uc158 \uc0dd\uc131 \ubc0f \uc804\ub7b5 \uc218\ub3d9 \ud638\ucd9c"\ud568\r\n\ud544\ud130\ub294 "\ub85c\uadf8\uc778 \uc774\ud6c4 API"\uc5d0 "\uc138\uc158 \uc720\ud6a8\uc131 \uac80\uc99d \ubc0f \uc815\ucc45 \ub2f4\ub2f9"'}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"@Bean\r\npublic SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n    http\r\n        .cors(cors -> cors.configurationSource(corsConfigurationSource()))\r\n        .csrf(csrf -> csrf.disable())  // REST API\ub294 CSRF \ubd88\ud544\uc694\r\n\r\n        // SecurityContext \uc800\uc7a5 \ubc29\uc2dd \uc124\uc815\r\n        .securityContext(context -> context\r\n            .securityContextRepository(securityContextRepository())\r\n            .requireExplicitSave(true)  // \uba85\uc2dc\uc801 \uc800\uc7a5 (Controller\uc5d0\uc11c \uc218\ub3d9 \uc800\uc7a5)\r\n        )\r\n\r\n        // \uc138\uc158 \uad00\ub9ac \uc124\uc815\r\n        .sessionManagement(session -> session\r\n            .sessionFixation().changeSessionId()  // \uc138\uc158 \uace0\uc815 \uacf5\uaca9 \ubc29\uc9c0\r\n            .sessionCreationPolicy(SessionCreationPolicy.IF_REQUIRED)\r\n            .maximumSessions(1)  // \ub3d9\uc77c \uacc4\uc815 1\uba85\ub9cc\r\n            .maxSessionsPreventsLogin(false)  // \uae30\uc874 \uc138\uc158 \ub9cc\ub8cc \ubc29\uc2dd\r\n            .sessionRegistry(sessionRegistry())\r\n            .expiredSessionStrategy(customSessionExpiredStrategy())  // \ub9cc\ub8cc \uc2dc \ucc98\ub9ac\r\n        )\r\n\r\n        // \uc608\uc678 \ucc98\ub9ac\r\n        .exceptionHandling(ex -> ex\r\n            .authenticationEntryPoint(authenticationDeniedHandler())  // 401\r\n            .accessDeniedHandler(authorizationDeniedHandler())  // 403\r\n        )\r\n\r\n        // \ucee4\uc2a4\ud140 \ud544\ud130 \ucd94\uac00\r\n        .addFilterBefore(sessionExpiredFilter(), SecurityContextPersistenceFilter.class)\r\n        .addFilterBefore(improvedLogoutFilter(), LogoutFilter.class);\r\n\r\n    return http.build();\r\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\uc8fc\uc694 \uc124\uc815 \uc124\uba85"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"requireExplicitSave"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\uae30\ubcf8\uac12(false)\uc740 SecurityContextPersistenceFilter\uac00 \uc790\ub3d9 \uc800\uc7a5"}),"\n",(0,i.jsx)(e.li,{children:"true\ub85c \uc124\uc815 \uc2dc Controller\uc5d0\uc11c \uc218\ub3d9\uc73c\ub85c saveContext() \ud638\ucd9c \ud544\uc694"}),"\n",(0,i.jsx)(e.li,{children:"true\ub85c \ubcc0\uacbd\ud558\uc9c0 \uc54a\uc73c\uba74, SecurityContext\uac00 \ub450 \ubc88 \uc800\uc7a5\ub428"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"sessionFixation().changeSessionId()"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\uc138\uc158 \uace0\uc815 \uacf5\uaca9(Session Fixation) \ubc29\uc9c0"}),"\n",(0,i.jsx)(e.li,{children:"\ub85c\uadf8\uc778 \uc131\uacf5 \uc2dc \uc138\uc158 ID\ub97c \uc0c8\ub85c \ubc1c\uae09\ud558\uc5ec \uacf5\uaca9\uc790\uac00 \ud0c8\ucde8\ud55c \uc138\uc158 ID \ubb34\ud6a8\ud654"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"4-\ub3d9\uc791-\uac80\uc99d",children:"4. \ub3d9\uc791 \uac80\uc99d"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1) \uc815\uc0c1 \ub85c\uadf8\uc778"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:'POST /api/login\r\n{\r\n  "email": "user@example.com",\r\n  "password": "password123"\r\n}\r\n\r\n\u2192 200 OK\r\n{\r\n  "status": "SUCCESS",\r\n  "user": {\r\n    "email": "user@example.com",\r\n    "type": "CUSTOMER"\r\n  }\r\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2) 5\ud68c \uc2e4\ud328 \u2192 \uacc4\uc815 \uc7a0\uae40"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:'# 1~4\ud68c \uc2e4\ud328\r\n\u2192 400 Bad Request\r\n{\r\n  "error": "\uc544\uc774\ub514 \ub610\ub294 \ube44\ubc00\ubc88\ud638\uac00 \ud2c0\ub838\uc2b5\ub2c8\ub2e4. (\ub0a8\uc740 \uc2dc\ub3c4: 4\ud68c)"\r\n}\r\n\r\n# 5\ud68c \uc2e4\ud328\r\n\u2192 423 Locked\r\n{\r\n  "error": "5\ud68c \uc2e4\ud328\ub85c \uacc4\uc815\uc774 \uc7a0\uacbc\uc2b5\ub2c8\ub2e4."\r\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"3) \uccab \ub85c\uadf8\uc778"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:'POST /api/login\r\n{\r\n  "email": "newuser@example.com",\r\n  "password": "temp123"\r\n}\r\n\r\n\u2192 200 OK\r\n{\r\n  "status": "FIRST_LOGIN",\r\n  "message": "\ube44\ubc00\ubc88\ud638\ub97c \ubcc0\uacbd\ud574\uc57c \ud569\ub2c8\ub2e4."\r\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"4) \uc911\ubcf5 \ub85c\uadf8\uc778 \uc81c\uc5b4"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"# \uc0ac\uc6a9\uc790 A: \ub85c\uadf8\uc778 \uc131\uacf5 (Session ID: abc123)\r\n# \uc0ac\uc6a9\uc790 B: \uac19\uc740 \uacc4\uc815\uc73c\ub85c \ub85c\uadf8\uc778 \uc2dc\ub3c4\r\n\r\n\u2192 \uc0ac\uc6a9\uc790 A\uc758 \uc138\uc158\uc774 \ub9cc\ub8cc\ub428\r\n\u2192 \uc0ac\uc6a9\uc790 A\uac00 API \ud638\ucd9c \uc2dc 401 Unauthorized \uc751\ub2f5\n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"5-\uc815\ub9ac",children:"5. \uc815\ub9ac"}),"\n",(0,i.jsx)(e.h3,{id:"\ud575\uc2ec-\uc694\uc57d",children:"\ud575\uc2ec \uc694\uc57d"}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsxs)(e.p,{children:["JSON \uae30\ubc18 \ub85c\uadf8\uc778 + \uacc4\uc815 \uc7a0\uae08 + \uccab \ub85c\uadf8\uc778 \uccb4\ud06c + ROLE\ubcc4 \uc751\ub2f5",(0,i.jsx)(e.br,{}),"\n","\uc774 4\uac00\uc9c0\ub97c FormLogin \ud544\ud130\uc5d0\uc11c \ucc98\ub9ac\ud558\uae30\ub294 \ub108\ubb34 \ubcf5\uc7a1\ud574\uc2b5\ub2c8\ub2e4."]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Controller \ubc29\uc2dd\uc73c\ub85c \uc804\ud658\ud55c \ud6c4:"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c1\uc774 Service \ub808\uc774\uc5b4\uc5d0 \uba85\ud655\ud788 \ubd84\ub9ac\ub428"}),"\n",(0,i.jsx)(e.li,{children:"Spring Security\uc758 \uc138\uc158 \uc815\ucc45\uc740 \uadf8\ub300\ub85c \ud65c\uc6a9"}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"\ud2b8\ub808\uc774\ub4dc\uc624\ud504",children:"\ud2b8\ub808\uc774\ub4dc\uc624\ud504"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\uc7a5\uc810:"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c1 \uc790\uc720\ub3c4 \ub192\uc74c"}),"\n",(0,i.jsx)(e.li,{children:"\ucf54\ub4dc \uac00\ub3c5\uc131 \uc88b\uc74c"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\ub2e8\uc810:"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:'Spring Security\uc758 "\uc790\ub3d9\ud654"\ub97c \ud3ec\uae30'}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"SessionAuthenticationStrategy"})," \uc218\ub3d9 \ud638\ucd9c \ud544\uc694"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"SecurityContext"})," \uc218\ub3d9 \uc800\uc7a5 \ud544\uc694"]}),"\n"]}),"\n"]}),"\n"]})]})}function h(n={}){const{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(d,{...n})}):d(n)}}}]);