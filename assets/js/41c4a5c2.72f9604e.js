"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[8150],{5114(n,e,r){r.r(e),r.d(e,{assets:()=>c,contentTitle:()=>t,default:()=>j,frontMatter:()=>d,metadata:()=>i,toc:()=>h});const i=JSON.parse('{"id":"projects/security-ticket/troubleshooting/mybatis-optimization","title":"MyBatis \uac80\uc0c9 \ucffc\ub9ac \ucd5c\uc801\ud654 (36% \uac1c\uc120)","description":"\ub3d9\uc801 SQL \ucd5c\uc801\ud654 + EXISTS \uc11c\ube0c\ucffc\ub9ac\ub85c \ud3c9\uade0 \uc751\ub2f5\uc2dc\uac04 24.45ms \u2192 15.51ms","source":"@site/docs/projects/security-ticket/troubleshooting/mybatis-optimization.md","sourceDirName":"projects/security-ticket/troubleshooting","slug":"/projects/security-ticket/troubleshooting/mybatis-optimization","permalink":"/docs/projects/security-ticket/troubleshooting/mybatis-optimization","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"MyBatis \uac80\uc0c9 \ucffc\ub9ac \ucd5c\uc801\ud654 (36% \uac1c\uc120)"},"sidebar":"tutorialSidebar","previous":{"title":"Security Ticket Platform","permalink":"/docs/projects/security-ticket/"},"next":{"title":"\ucee4\uc2a4\ud140 \uc138\uc158 \uc778\uc99d \uad6c\ud604","permalink":"/docs/projects/security-ticket/troubleshooting/custom-session-auth"}}');var s=r(4848),l=r(8453);const d={sidebar_position:1,title:"MyBatis \uac80\uc0c9 \ucffc\ub9ac \ucd5c\uc801\ud654 (36% \uac1c\uc120)"},t="\ubcf5\ud569 \uac80\uc0c9 \uc131\ub2a5 36% \uac1c\uc120 (JPA \u2192 MyBatis)",c={},h=[{value:"0. \uac1c\uc694",id:"0-\uac1c\uc694",level:2},{value:"1. \ubb38\uc81c \ubd84\uc11d",id:"1-\ubb38\uc81c-\ubd84\uc11d",level:2},{value:"\uc694\uad6c\uc0ac\ud56d: \uad00\ub9ac\uc790 \ud398\uc774\uc9c0 \ud68c\uc6d0 \uac80\uc0c9",id:"\uc694\uad6c\uc0ac\ud56d-\uad00\ub9ac\uc790-\ud398\uc774\uc9c0-\ud68c\uc6d0-\uac80\uc0c9",level:3},{value:"2. \uad6c\ud604 \uacfc\uc815",id:"2-\uad6c\ud604-\uacfc\uc815",level:2},{value:"1\ub2e8\uacc4) \uc21c\uc218 JPA",id:"1\ub2e8\uacc4-\uc21c\uc218-jpa",level:3},{value:"2\ub2e8\uacc4) Native Query",id:"2\ub2e8\uacc4-native-query",level:3},{value:"3\ub2e8\uacc4) JPA Specification",id:"3\ub2e8\uacc4-jpa-specification",level:3},{value:"4\ub2e8\uacc4) MyBatis (\ucd08\uae30 \ubc84\uc804)",id:"4\ub2e8\uacc4-mybatis-\ucd08\uae30-\ubc84\uc804",level:3},{value:"3. \ucd5c\uc885 \ud574\uacb0: MyBatis \ucd5c\uc801\ud654",id:"3-\ucd5c\uc885-\ud574\uacb0-mybatis-\ucd5c\uc801\ud654",level:2},{value:"\ud575\uc2ec \uac1c\uc120 1: \ub3d9\uc801 SQL \ub2e8\uc21c\ud654",id:"\ud575\uc2ec-\uac1c\uc120-1-\ub3d9\uc801-sql-\ub2e8\uc21c\ud654",level:3},{value:"\ud575\uc2ec \uac1c\uc120 2: COUNT \ucffc\ub9ac \ucd5c\uc801\ud654 (JOIN \u2192 EXISTS)",id:"\ud575\uc2ec-\uac1c\uc120-2-count-\ucffc\ub9ac-\ucd5c\uc801\ud654-join--exists",level:3},{value:"4. \uc131\ub2a5 \uce21\uc815 \uacb0\uacfc",id:"4-\uc131\ub2a5-\uce21\uc815-\uacb0\uacfc",level:2},{value:"\ucd5c\uc885 \ube44\uad50",id:"\ucd5c\uc885-\ube44\uad50",level:3},{value:"MyBatis \ucd08\uae30 \ub300\ube44 \uac1c\uc120",id:"mybatis-\ucd08\uae30-\ub300\ube44-\uac1c\uc120",level:3},{value:"5. \ud575\uc2ec \uac1c\uc120 \ud3ec\uc778\ud2b8",id:"5-\ud575\uc2ec-\uac1c\uc120-\ud3ec\uc778\ud2b8",level:2},{value:"1\ufe0f\u20e3 \ucffc\ub9ac \uad6c\uc870 \ub2e8\uc21c\ud654",id:"1\ufe0f\u20e3-\ucffc\ub9ac-\uad6c\uc870-\ub2e8\uc21c\ud654",level:3},{value:"2\ufe0f\u20e3 \ubd88\ud544\uc694\ud55c JOIN \uc81c\uac70",id:"2\ufe0f\u20e3-\ubd88\ud544\uc694\ud55c-join-\uc81c\uac70",level:3},{value:"3\ufe0f\u20e3 DB \ubd80\ud558 \uac10\uc18c",id:"3\ufe0f\u20e3-db-\ubd80\ud558-\uac10\uc18c",level:3},{value:"6. \ud558\uc774\ube0c\ub9ac\ub4dc ORM \uc804\ub7b5",id:"6-\ud558\uc774\ube0c\ub9ac\ub4dc-orm-\uc804\ub7b5",level:2},{value:"7. \uacb0\ub860",id:"7-\uacb0\ub860",level:2},{value:"8. \ucd94\uac00 \uace0\ub824\uc0ac\ud56d",id:"8-\ucd94\uac00-\uace0\ub824\uc0ac\ud56d",level:2},{value:"\uc778\ub371\uc2a4 \uc124\uacc4",id:"\uc778\ub371\uc2a4-\uc124\uacc4",level:3},{value:"\uc2e4\ud589 \uacc4\ud68d \ubd84\uc11d",id:"\uc2e4\ud589-\uacc4\ud68d-\ubd84\uc11d",level:3},{value:"9. \ucc38\uace0 \uc790\ub8cc",id:"9-\ucc38\uace0-\uc790\ub8cc",level:2}];function x(n){const e={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"\ubcf5\ud569-\uac80\uc0c9-\uc131\ub2a5-36-\uac1c\uc120-jpa--mybatis",children:"\ubcf5\ud569 \uac80\uc0c9 \uc131\ub2a5 36% \uac1c\uc120 (JPA \u2192 MyBatis)"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsxs)(e.p,{children:["\ub3d9\uc801 SQL \ucd5c\uc801\ud654 + EXISTS \uc11c\ube0c\ucffc\ub9ac\ub85c ",(0,s.jsx)(e.strong,{children:"\ud3c9\uade0 \uc751\ub2f5\uc2dc\uac04 24.45ms \u2192 15.51ms"})]}),"\n"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"0-\uac1c\uc694",children:"0. \uac1c\uc694"}),"\n",(0,s.jsx)(e.admonition,{title:"\ubb38\uc81c \uc0c1\ud669",type:"danger",children:(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\uc694\uad6c\uc0ac\ud56d"}),": \ub2e4\uc591\ud55c \ud544\ud130\ub9c1 \uc870\uac74 (\uae30\uac04, \ud0a4\uc6cc\ub4dc 6\uc885, \uc815\ub82c)"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"JPA Specification \uc0ac\uc6a9 \uc2dc"}),": Java\uc640 SQL \ub85c\uc9c1 \ud63c\uc7ac, \uac00\ub3c5\uc131 \uc800\ud558, \ud29c\ub2dd \uc5b4\ub824\uc6c0"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"MyBatis \ucd08\uae30 \ubc84\uc804"}),": \ub3d9\uc801 SQL \uad6c\uc870 \ubb38\uc81c\ub85c \uc131\ub2a5 \uc800\ud558 (\ucd5c\ub300 473ms)"]}),"\n"]})}),"\n",(0,s.jsx)(e.admonition,{title:"\ud574\uacb0 \ubc29\ud5a5",type:"tip",children:(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["MyBatis \ub3d9\uc801 SQL\ub85c ",(0,s.jsx)(e.strong,{children:"\uac00\ub3c5\uc131 \ud655\ubcf4"})]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"<choose>"})," \uc911\ucca9 \uc81c\uac70 \u2192 ",(0,s.jsx)(e.strong,{children:"OR \uc870\uac74 \uae30\ubc18 \ud1b5\ud569"})]}),"\n",(0,s.jsxs)(e.li,{children:["COUNT \ucffc\ub9ac\ub97c ",(0,s.jsx)(e.strong,{children:"EXISTS \uc11c\ube0c\ucffc\ub9ac"}),"\ub85c \ubcc0\uacbd"]}),"\n",(0,s.jsx)(e.li,{children:"SQL \uce90\uc2dc \ud6a8\uc728 \ud5a5\uc0c1"}),"\n"]})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"1-\ubb38\uc81c-\ubd84\uc11d",children:"1. \ubb38\uc81c \ubd84\uc11d"}),"\n",(0,s.jsx)(e.h3,{id:"\uc694\uad6c\uc0ac\ud56d-\uad00\ub9ac\uc790-\ud398\uc774\uc9c0-\ud68c\uc6d0-\uac80\uc0c9",children:"\uc694\uad6c\uc0ac\ud56d: \uad00\ub9ac\uc790 \ud398\uc774\uc9c0 \ud68c\uc6d0 \uac80\uc0c9"}),"\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"\ud544\ud130 \uc870\uac74"}),(0,s.jsx)(e.th,{children:"\uc635\uc158"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"\uae30\uac04 \ud544\ud130"})}),(0,s.jsx)(e.td,{children:"\ucd5c\uadfc \ub85c\uadf8\uc778 \ub0a0\uc9dc \ubc94\uc704"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"\ud0a4\uc6cc\ub4dc \uac80\uc0c9"})}),(0,s.jsx)(e.td,{children:"\uc804\uccb4 / \uc774\uba54\uc77c / \uc774\ub984 / \uc18c\uc18d / \ubd80\uc11c / \uc5f0\ub77d\ucc98"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"\uc815\ub82c"})}),(0,s.jsx)(e.td,{children:"\ucd5c\uadfc \ub85c\uadf8\uc778 \uc21c / \uc774\ub984 \uc21c"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"\ud398\uc774\uc9c0\ub124\uc774\uc158"})}),(0,s.jsx)(e.td,{children:"\ubc88\ud638 \uae30\ubc18 (10\uac1c\uc529)"})]})]})]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\ud14c\uc2a4\ud2b8 \uc870\uac74"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"JMeter: \ub3d9\uc2dc \uc0ac\uc6a9\uc790 10\uba85, \uac01 50\ud68c \uc694\uccad"}),"\n",(0,s.jsx)(e.li,{children:"\ub370\uc774\ud130: Company 10\uac1c, User 1050\uac1c (Clients 1000\uba85 + Admin 50\uba85)"}),"\n",(0,s.jsx)(e.li,{children:"4\uac00\uc9c0 \uc2dc\ub098\ub9ac\uc624: Basic(\ud544\ud130 \uc5c6\uc74c), Date Filter, Search, Complex Filter"}),"\n"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"2-\uad6c\ud604-\uacfc\uc815",children:"2. \uad6c\ud604 \uacfc\uc815"}),"\n",(0,s.jsx)(e.h3,{id:"1\ub2e8\uacc4-\uc21c\uc218-jpa",children:"1\ub2e8\uacc4) \uc21c\uc218 JPA"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:"public interface UserRepository extends JpaRepository {\r\n    Page findByClientCompanyNameContaining(String companyName, Pageable pageable);\r\n    Page findByLastLoginAtBetween(LocalDateTime start, LocalDateTime end, Pageable pageable);\r\n    // \ud544\ud130\ub9c1 \uc870\uac74\ub9c8\ub2e4 \uba54\uc11c\ub4dc \uc99d\uac00 \u2192 \uac00\ub3c5\uc131 \uc800\ud558\r\n}\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\ubb38\uc81c\uc810"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Repository \uba54\uc11c\ub4dc \uc99d\uac00"}),"\n",(0,s.jsx)(e.li,{children:"Service \ubd84\uae30 \ucc98\ub9ac \ubcf5\uc7a1"}),"\n",(0,s.jsx)(e.li,{children:"\uc870\uac74 \uc870\ud569\uc5d0 \ub530\ub978 \uba54\uc11c\ub4dc \ud3ed\ubc1c"}),"\n"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h3,{id:"2\ub2e8\uacc4-native-query",children:"2\ub2e8\uacc4) Native Query"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:'@Query(value = """\r\n    SELECT u.*, c.*, co.*\r\n    FROM user u\r\n    LEFT JOIN client c ON u.client_id = c.client_id\r\n    LEFT JOIN company co ON c.company_id = co.company_id\r\n    WHERE (:keyword IS NULL OR co.name LIKE CONCAT(\'%\', :keyword, \'%\'))\r\n      AND (:startDate IS NULL OR u.last_login_at >= :startDate)\r\n    ORDER BY u.last_login_at DESC\r\n    """, nativeQuery = true)\r\nPage searchClients(...);\n'})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\ubb38\uc81c\uc810"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"DB \uc885\uc18d (MySQL \uc804\uc6a9)"}),"\n",(0,s.jsxs)(e.li,{children:["\ub3d9\uc801 \uc870\uac74 \ucc98\ub9ac (",(0,s.jsx)(e.code,{children:"IS NULL OR"}),") \ube44\ud6a8\uc728"]}),"\n",(0,s.jsx)(e.li,{children:"\uc2e4\ud589 \uacc4\ud68d \ucd5c\uc801\ud654 \uc5b4\ub824\uc6c0"}),"\n"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h3,{id:"3\ub2e8\uacc4-jpa-specification",children:"3\ub2e8\uacc4) JPA Specification"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:'public static Specification filterClients(\r\n    LocalDate startDate,\r\n    LocalDate endDate,\r\n    String range,\r\n    String keyword\r\n) {\r\n    return (root, query, criteriaBuilder) -> {\r\n        List predicates = new ArrayList<>();\r\n\r\n        // Client\uac00 \uc788\ub294 User\ub9cc\r\n        predicates.add(criteriaBuilder.isNotNull(root.get("client")));\r\n\r\n        // \ub0a0\uc9dc \ud544\ud130\r\n        if (startDate != null && endDate != null) {\r\n            predicates.add(criteriaBuilder.between(\r\n                root.get("lastLoginAt"),\r\n                startDateTime,\r\n                endDateTime\r\n            ));\r\n        }\r\n\r\n        // \ud0a4\uc6cc\ub4dc \uac80\uc0c9\r\n        if ("all".equals(range)) {\r\n            Join clientJoin = root.join("client");\r\n            Join companyJoin = clientJoin.join("company");\r\n\r\n            predicates.add(criteriaBuilder.or(\r\n                criteriaBuilder.like(root.get("email"), "%" + keyword + "%"),\r\n                criteriaBuilder.like(root.get("name"), "%" + keyword + "%"),\r\n                criteriaBuilder.like(companyJoin.get("name"), "%" + keyword + "%")\r\n            ));\r\n        }\r\n\r\n        return criteriaBuilder.and(predicates.toArray(new Predicate[0]));\r\n    };\r\n}\n'})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\uc7a5\uc810"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u2705 ORM \uc77c\uad00\uc131 \uc720\uc9c0"}),"\n",(0,s.jsx)(e.li,{children:"\u2705 N+1 \ud574\uacb0 (root.join() Fetch Join \ud6a8\uacfc)"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\ub2e8\uc810"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u274c Java\uc640 SQL \ub85c\uc9c1 \ud63c\uc7ac \u2192 \uac00\ub3c5\uc131 \uc800\ud558"}),"\n",(0,s.jsx)(e.li,{children:"\u274c \ucffc\ub9ac \ud29c\ub2dd \uc5b4\ub824\uc6c0"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\ud14c\uc2a4\ud2b8 \uacb0\uacfc"})}),"\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"\uad6c\ubd84"}),(0,s.jsx)(e.th,{children:"\ud3c9\uade0 \uc751\ub2f5\uc2dc\uac04(ms)"}),(0,s.jsx)(e.th,{children:"\ucd5c\ub300(ms)"}),(0,s.jsx)(e.th,{children:"\ucc98\ub9ac\ub7c9(TPS)"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"Basic"}),(0,s.jsx)(e.td,{children:"39.99"}),(0,s.jsx)(e.td,{children:"81.67"}),(0,s.jsx)(e.td,{children:"55.64"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"Date Filter"}),(0,s.jsx)(e.td,{children:"15.86"}),(0,s.jsx)(e.td,{children:"44.00"}),(0,s.jsx)(e.td,{children:"55.96"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"Search"}),(0,s.jsx)(e.td,{children:"20.99"}),(0,s.jsx)(e.td,{children:"77.33"}),(0,s.jsx)(e.td,{children:"55.93"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"Complex Filter"}),(0,s.jsx)(e.td,{children:"20.95"}),(0,s.jsx)(e.td,{children:"75.00"}),(0,s.jsx)(e.td,{children:"55.30"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"Total"})}),(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"24.45"})}),(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"83.67"})}),(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"221.77"})})]})]})]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h3,{id:"4\ub2e8\uacc4-mybatis-\ucd08\uae30-\ubc84\uc804",children:"4\ub2e8\uacc4) MyBatis (\ucd08\uae30 \ubc84\uc804)"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-xml",children:" \uc911\ucca9 \uc0ac\uc6a9 --\x3e\r\n\r\n  SELECT u.*, c.*, co.*\r\n  FROM user u\r\n  LEFT JOIN client c ON u.client_id = c.client_id\r\n  LEFT JOIN company co ON c.company_id = co.company_id\r\n  WHERE u.client_id IS NOT NULL\r\n\r\n\r\n\r\n\r\n        AND (\r\n          u.email LIKE CONCAT('%', #{keyword}, '%')\r\n          OR u.name LIKE CONCAT('%', #{keyword}, '%')\r\n          OR co.name LIKE CONCAT('%', #{keyword}, '%')\r\n        )\r\n\r\n\r\n        AND u.email LIKE CONCAT('%', #{keyword}, '%')\r\n\r\n\r\n\r\n\r\n\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\ud14c\uc2a4\ud2b8 \uacb0\uacfc"})}),"\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"\uad6c\ubd84"}),(0,s.jsx)(e.th,{children:"\ud3c9\uade0 \uc751\ub2f5\uc2dc\uac04(ms)"}),(0,s.jsx)(e.th,{children:"\ucd5c\ub300(ms)"}),(0,s.jsx)(e.th,{children:"\ucc98\ub9ac\ub7c9(TPS)"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"Basic"}),(0,s.jsx)(e.td,{children:"23.85"}),(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"473"})}),(0,s.jsx)(e.td,{children:"57.59"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"Date Filter"}),(0,s.jsx)(e.td,{children:"23.39"}),(0,s.jsx)(e.td,{children:"92"}),(0,s.jsx)(e.td,{children:"59.34"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"Search"}),(0,s.jsx)(e.td,{children:"24.04"}),(0,s.jsx)(e.td,{children:"108"}),(0,s.jsx)(e.td,{children:"59.15"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"Complex Filter"}),(0,s.jsx)(e.td,{children:"23.46"}),(0,s.jsx)(e.td,{children:"112"}),(0,s.jsx)(e.td,{children:"59.32"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"Total"})}),(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"24.56"})}),(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"473"})}),(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"66.70"})})]})]})]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\ubb38\uc81c\uc810"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u274c ",(0,s.jsx)(e.code,{children:"<choose>"})," \uc911\ucca9\uc73c\ub85c \ub9e4\ubc88 SQL \uad6c\ubb38 \ub2e4\ub974\uac8c \uc0dd\uc131"]}),"\n",(0,s.jsx)(e.li,{children:"\u274c SQL \ud15c\ud50c\ub9bf\uc774 \uc790\uc8fc \ubcc0\ud574 DB \uce90\uc2dc \ube44\ud6a8\uc728"}),"\n",(0,s.jsx)(e.li,{children:"\u274c \ucd5c\ub300 \uc751\ub2f5\uc2dc\uac04 \ud3b8\ucc28 \ud07c (473ms)"}),"\n"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"3-\ucd5c\uc885-\ud574\uacb0-mybatis-\ucd5c\uc801\ud654",children:"3. \ucd5c\uc885 \ud574\uacb0: MyBatis \ucd5c\uc801\ud654"}),"\n",(0,s.jsx)(e.h3,{id:"\ud575\uc2ec-\uac1c\uc120-1-\ub3d9\uc801-sql-\ub2e8\uc21c\ud654",children:"\ud575\uc2ec \uac1c\uc120 1: \ub3d9\uc801 SQL \ub2e8\uc21c\ud654"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-xml",children:" ## \uc911\ucca9 (SQL \uce90\uc2dc \ube44\ud6a8\uc728) --\x3e\r\n      AND (u.email LIKE ... OR u.name LIKE ...)\r\n      ...\r\n      AND u.email LIKE ...\r\n\r\n  AND (\r\n    (#{range} = 'all' AND (\r\n      u.email LIKE CONCAT('%', #{keyword}, '%')\r\n      OR u.name LIKE CONCAT('%', #{keyword}, '%')\r\n      OR u.department LIKE CONCAT('%', #{keyword}, '%')\r\n    ))\r\n    OR (#{range} = 'email' AND u.email LIKE CONCAT('%', #{keyword}, '%'))\r\n    OR (#{range} = 'name' AND u.name LIKE CONCAT('%', #{keyword}, '%'))\r\n    OR (#{range} = 'department' AND u.department LIKE CONCAT('%', #{keyword}, '%'))\r\n  )\r\n\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\ud6a8\uacfc"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u2705 \ucffc\ub9ac \ud15c\ud50c\ub9bf \uace0\uc815\ud654 \u2192 SQL \uce90\uc2dc \ud6a8\uc728 \ud5a5\uc0c1"}),"\n",(0,s.jsx)(e.li,{children:"\u2705 \uc870\uac74\uc5d0 \ub530\ub77c SQL \uad6c\ubb38\uc774 \ubc14\ub00c\uc9c0 \uc54a\uc74c"}),"\n"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h3,{id:"\ud575\uc2ec-\uac1c\uc120-2-count-\ucffc\ub9ac-\ucd5c\uc801\ud654-join--exists",children:"\ud575\uc2ec \uac1c\uc120 2: COUNT \ucffc\ub9ac \ucd5c\uc801\ud654 (JOIN \u2192 EXISTS)"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-xml",children:"  SELECT COUNT(*)\r\n  FROM user u\r\n  LEFT JOIN client c ON u.client_id = c.client_id\r\n  LEFT JOIN company co ON c.company_id = co.company_id\r\n  WHERE ...\r\n\r\n\r\n  SELECT COUNT(*)\r\n  FROM user u\r\n  WHERE u.client_id IS NOT NULL\r\n\r\n\r\n    AND (\r\n      u.email LIKE CONCAT('%', #{keyword}, '%')\r\n      OR EXISTS (\r\n        SELECT 1 FROM client c\r\n        WHERE c.client_id = u.client_id\r\n        AND c.phone_number LIKE CONCAT('%', #{keyword}, '%')\r\n      )\r\n      OR EXISTS (\r\n        SELECT 1 FROM client c\r\n        JOIN company co ON c.company_id = co.company_id\r\n        WHERE c.client_id = u.client_id\r\n        AND co.name LIKE CONCAT('%', #{keyword}, '%')\r\n      )\r\n    )\r\n\r\n\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"JOIN vs EXISTS \ube44\uad50"})}),"\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"\ud56d\ubaa9"}),(0,s.jsx)(e.th,{children:"JOIN \ud6c4 COUNT(*)"}),(0,s.jsx)(e.th,{children:(0,s.jsx)(e.strong,{children:"EXISTS (\ucc44\ud0dd)"})})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"\ub3d9\uc791 \ubc29\uc2dd"})}),(0,s.jsx)(e.td,{children:"\ubaa8\ub4e0 \uc870\uc778 \uacb0\uacfc \uacc4\uc0b0 \u2192 \uc784\uc2dc \ud14c\uc774\ube14 \uc0dd\uc131 \u2192 COUNT"}),(0,s.jsx)(e.td,{children:"\uc870\uac74 \ub9cc\uc871 \uc2dc \uccab \ud589\uc5d0\uc11c \uac80\uc0c9 \uc911\uc9c0"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"\ubd88\ud544\uc694\ud55c \uc870\uc778"})}),(0,s.jsx)(e.td,{children:"\u2705 \ubc1c\uc0dd"}),(0,s.jsx)(e.td,{children:"\u274c \uc81c\uac70"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"\uc870\uae30 \uc885\ub8cc"})}),(0,s.jsx)(e.td,{children:"\u274c \ubd88\uac00"}),(0,s.jsx)(e.td,{children:"\u2705 \uac00\ub2a5"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"\uc131\ub2a5"})}),(0,s.jsx)(e.td,{children:"\ub290\ub9bc"}),(0,s.jsx)(e.td,{children:"\ube60\ub984"})]})]})]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"4-\uc131\ub2a5-\uce21\uc815-\uacb0\uacfc",children:"4. \uc131\ub2a5 \uce21\uc815 \uacb0\uacfc"}),"\n",(0,s.jsx)(e.h3,{id:"\ucd5c\uc885-\ube44\uad50",children:"\ucd5c\uc885 \ube44\uad50"}),"\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"\uad6c\ubd84"}),(0,s.jsx)(e.th,{children:"JPA Spec"}),(0,s.jsx)(e.th,{children:"MyBatis (\ucd08\uae30)"}),(0,s.jsx)(e.th,{children:(0,s.jsx)(e.strong,{children:"MyBatis (\ucd5c\uc885)"})}),(0,s.jsx)(e.th,{children:"\uac1c\uc120\uc728 (JPA \ub300\ube44)"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"\ud3c9\uade0 \uc751\ub2f5\uc2dc\uac04"})}),(0,s.jsx)(e.td,{children:"24.45ms"}),(0,s.jsx)(e.td,{children:"24.56ms"}),(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"15.51ms"})}),(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"36.8% \u2193"})})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"\ucd5c\ub300 \uc751\ub2f5\uc2dc\uac04"})}),(0,s.jsx)(e.td,{children:"83.67ms"}),(0,s.jsx)(e.td,{children:"473ms"}),(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"54ms"})}),(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"35% \u2193"})})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"\ucc98\ub9ac\ub7c9 (TPS)"})}),(0,s.jsx)(e.td,{children:"221.77"}),(0,s.jsx)(e.td,{children:"66.70"}),(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"273.34"})}),(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"23% \u2191"})})]})]})]}),"\n",(0,s.jsx)(e.h3,{id:"mybatis-\ucd08\uae30-\ub300\ube44-\uac1c\uc120",children:"MyBatis \ucd08\uae30 \ub300\ube44 \uac1c\uc120"}),"\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"\ud56d\ubaa9"}),(0,s.jsx)(e.th,{children:"Before"}),(0,s.jsx)(e.th,{children:"After"}),(0,s.jsx)(e.th,{children:"\uac1c\uc120\uc728"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"\ud3c9\uade0 \uc751\ub2f5\uc2dc\uac04"})}),(0,s.jsx)(e.td,{children:"24.56ms"}),(0,s.jsx)(e.td,{children:"15.51ms"}),(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"36.8% \u2193"})})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"\ucd5c\ub300 \uc751\ub2f5\uc2dc\uac04"})}),(0,s.jsx)(e.td,{children:"473ms"}),(0,s.jsx)(e.td,{children:"54ms"}),(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"88.5% \u2193"})})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"\ucc98\ub9ac\ub7c9 (TPS)"})}),(0,s.jsx)(e.td,{children:"66.7"}),(0,s.jsx)(e.td,{children:"273.34"}),(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"309% \u2191"})})]})]})]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"5-\ud575\uc2ec-\uac1c\uc120-\ud3ec\uc778\ud2b8",children:"5. \ud575\uc2ec \uac1c\uc120 \ud3ec\uc778\ud2b8"}),"\n",(0,s.jsx)(e.h3,{id:"1\ufe0f\u20e3-\ucffc\ub9ac-\uad6c\uc870-\ub2e8\uc21c\ud654",children:"1\ufe0f\u20e3 \ucffc\ub9ac \uad6c\uc870 \ub2e8\uc21c\ud654"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"<choose>"})," \uc911\ucca9 \uc81c\uac70 \u2192 OR \uc870\uac74 \uae30\ubc18 \ud1b5\ud569"]}),"\n",(0,s.jsx)(e.li,{children:"SQL \ud15c\ud50c\ub9bf \uace0\uc815\ud654 \u2192 DB \uce90\uc2dc \ud6a8\uc728 \ud5a5\uc0c1"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"2\ufe0f\u20e3-\ubd88\ud544\uc694\ud55c-join-\uc81c\uac70",children:"2\ufe0f\u20e3 \ubd88\ud544\uc694\ud55c JOIN \uc81c\uac70"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"COUNT \ucffc\ub9ac\ub97c EXISTS \uc11c\ube0c\ucffc\ub9ac\ub85c \ubcc0\uacbd"}),"\n",(0,s.jsx)(e.li,{children:"\uc870\uac74 \ub9cc\uc871 \uc2dc \uccab \ud589\uc5d0\uc11c \uac80\uc0c9 \uc911\uc9c0"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"3\ufe0f\u20e3-db-\ubd80\ud558-\uac10\uc18c",children:"3\ufe0f\u20e3 DB \ubd80\ud558 \uac10\uc18c"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\uc784\uc2dc \ud14c\uc774\ube14 \uc0dd\uc131 \uc5c6\uc774 COUNT \uacc4\uc0b0"}),"\n",(0,s.jsx)(e.li,{children:"\uc778\ub371\uc2a4 \ud65c\uc6a9 \ucd5c\uc801\ud654"}),"\n"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"6-\ud558\uc774\ube0c\ub9ac\ub4dc-orm-\uc804\ub7b5",children:"6. \ud558\uc774\ube0c\ub9ac\ub4dc ORM \uc804\ub7b5"}),"\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"\uad6c\ubd84"}),(0,s.jsx)(e.th,{children:"\uae30\uc220"}),(0,s.jsx)(e.th,{children:"\uc0ac\uc6a9 \uc0ac\ub840"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"\uae30\ubcf8 CRUD"})}),(0,s.jsx)(e.td,{children:"JPA"}),(0,s.jsx)(e.td,{children:"\ud68c\uc6d0 \ub4f1\ub85d/\uc218\uc815/\uc0ad\uc81c, \ub2e8\uc21c \uc870\ud68c"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"\ubcf5\uc7a1\ud55c \uac80\uc0c9"})}),(0,s.jsx)(e.td,{children:"MyBatis"}),(0,s.jsx)(e.td,{children:"\ub2e4\uc911 \uc870\uac74 \ud544\ud130\ub9c1, \ud1b5\uacc4 \ucffc\ub9ac"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"\uc7a5\uc810"})}),(0,s.jsx)(e.td,{children:"-"}),(0,s.jsx)(e.td,{children:"\uac1c\ubc1c \uc0dd\uc0b0\uc131 \u2191, \ucffc\ub9ac \uc131\ub2a5 \u2191"})]})]})]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"7-\uacb0\ub860",children:"7. \uacb0\ub860"}),"\n",(0,s.jsx)(e.admonition,{title:"\uc131\uacfc",type:"success",children:(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["JPA Specification \ub300\ube44 ",(0,s.jsx)(e.strong,{children:"\ud3c9\uade0 \uc751\ub2f5\uc2dc\uac04 36% \uac1c\uc120"})," (24.45ms \u2192 15.51ms)"]}),"\n",(0,s.jsxs)(e.li,{children:["MyBatis \ucd08\uae30 \ub300\ube44 ",(0,s.jsx)(e.strong,{children:"\ucd5c\ub300 \uc751\ub2f5\uc2dc\uac04 88.5% \uac10\uc18c"})," (473ms \u2192 54ms)"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\ucffc\ub9ac \uad6c\uc870 \ub2e8\uc21c\ud654 + EXISTS \ud328\ud134"}),"\uc73c\ub85c DB \ubd80\ud558 \uac10\uc18c"]}),"\n"]})}),"\n",(0,s.jsx)(e.admonition,{title:"\ubc30\uc6b4 \uc810",type:"tip",children:(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"ORM \ud55c\uacc4 \uc0c1\ud669 \uc778\uc9c0"}),": \ubcf5\uc7a1\ud55c \uc870\ud68c\ub294 SQL \uc911\uc2ec \uc811\uadfc\uc774 \ud6a8\uc728\uc801"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\ub3d9\uc801 SQL \ucd5c\uc801\ud654"}),": \ucffc\ub9ac \ud15c\ud50c\ub9bf \uace0\uc815\ud654\uc758 \uc911\uc694\uc131"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"EXISTS \uc11c\ube0c\ucffc\ub9ac \ud328\ud134"}),": JOIN \uc5c6\uc774 \uc870\uac74 \ud655\uc778 \uac00\ub2a5"]}),"\n"]})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"8-\ucd94\uac00-\uace0\ub824\uc0ac\ud56d",children:"8. \ucd94\uac00 \uace0\ub824\uc0ac\ud56d"}),"\n",(0,s.jsx)(e.h3,{id:"\uc778\ub371\uc2a4-\uc124\uacc4",children:"\uc778\ub371\uc2a4 \uc124\uacc4"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"-- user \ud14c\uc774\ube14\r\nCREATE INDEX idx_user_client_id ON user(client_id);\r\nCREATE INDEX idx_user_last_login_at ON user(last_login_at);\r\nCREATE INDEX idx_user_email ON user(email);\r\nCREATE INDEX idx_user_name ON user(name);\r\n\r\n-- client \ud14c\uc774\ube14\r\nCREATE INDEX idx_client_company_id ON client(company_id);\r\nCREATE INDEX idx_client_phone_number ON client(phone_number);\r\n\r\n-- company \ud14c\uc774\ube14\r\nCREATE INDEX idx_company_name ON company(name);\n"})}),"\n",(0,s.jsx)(e.h3,{id:"\uc2e4\ud589-\uacc4\ud68d-\ubd84\uc11d",children:"\uc2e4\ud589 \uacc4\ud68d \ubd84\uc11d"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-sql",children:"EXPLAIN SELECT COUNT(*)\r\nFROM user u\r\nWHERE u.client_id IS NOT NULL\r\nAND (\r\n  u.email LIKE '%keyword%'\r\n  OR EXISTS (\r\n    SELECT 1 FROM client c\r\n    WHERE c.client_id = u.client_id\r\n    AND c.phone_number LIKE '%keyword%'\r\n  )\r\n);\n"})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"9-\ucc38\uace0-\uc790\ub8cc",children:"9. \ucc38\uace0 \uc790\ub8cc"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://mybatis.org/mybatis-3/dynamic-sql.html",children:"MyBatis - Dynamic SQL"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://dev.mysql.com/doc/refman/8.0/en/exists-and-in-subquery-optimization.html",children:"MySQL Performance - EXISTS vs JOIN"})}),"\n"]})]})}function j(n={}){const{wrapper:e}={...(0,l.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(x,{...n})}):x(n)}},8453(n,e,r){r.d(e,{R:()=>d,x:()=>t});var i=r(6540);const s={},l=i.createContext(s);function d(n){const e=i.useContext(l);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function t(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:d(n.components),i.createElement(l.Provider,{value:e},n.children)}}}]);