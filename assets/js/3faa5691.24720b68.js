"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[5097],{15(e,n,r){r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"projects/bargain-hunter/troubleshooting/email-async","title":"\uc774\uba54\uc77c \ubc1c\uc1a1 \ube44\ub3d9\uae30 \ucc98\ub9ac (92% \uac1c\uc120)","description":"Spring Event + @Async\ub97c \ud65c\uc6a9\ud55c \ube44\ub3d9\uae30 \ucc98\ub9ac\ub85c 2.5\ucd08 \u2192 0.2\ucd08 \ub2ec\uc131","source":"@site/docs/projects/bargain-hunter/troubleshooting/email-async.md","sourceDirName":"projects/bargain-hunter/troubleshooting","slug":"/projects/bargain-hunter/troubleshooting/email-async","permalink":"/docs/projects/bargain-hunter/troubleshooting/email-async","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"\uc774\uba54\uc77c \ubc1c\uc1a1 \ube44\ub3d9\uae30 \ucc98\ub9ac (92% \uac1c\uc120)"},"sidebar":"tutorialSidebar","previous":{"title":"Bargain Hunter","permalink":"/docs/projects/bargain-hunter/"},"next":{"title":"\uc774\uba54\uc77c \uc778\uc99d \ub3d9\uc2dc\uc131 \ubb38\uc81c \ud574\uacb0","permalink":"/docs/projects/bargain-hunter/troubleshooting/redis-concurrency"}}');var t=r(4848),l=r(8453);const s={sidebar_position:1,title:"\uc774\uba54\uc77c \ubc1c\uc1a1 \ube44\ub3d9\uae30 \ucc98\ub9ac (92% \uac1c\uc120)"},c="\uc774\uba54\uc77c \ubc1c\uc1a1 API \uc751\ub2f5 \uc18d\ub3c4 92% \uac1c\uc120",d={},a=[{value:"0. \uac1c\uc694",id:"0-\uac1c\uc694",level:2},{value:"1. \ubb38\uc81c \ubd84\uc11d",id:"1-\ubb38\uc81c-\ubd84\uc11d",level:2},{value:"AS-IS: \ub3d9\uae30 \ube14\ub85c\ud0b9 \ubc29\uc2dd",id:"as-is-\ub3d9\uae30-\ube14\ub85c\ud0b9-\ubc29\uc2dd",level:3},{value:"2. \ud574\uacb0 \uacfc\uc815",id:"2-\ud574\uacb0-\uacfc\uc815",level:2},{value:"Step 1: Spring Event \uc124\uacc4",id:"step-1-spring-event-\uc124\uacc4",level:3},{value:"Step 2: \uc774\ubca4\ud2b8 \ubc1c\ud589",id:"step-2-\uc774\ubca4\ud2b8-\ubc1c\ud589",level:3},{value:"Step 3: \uc774\ubca4\ud2b8 \ub9ac\uc2a4\ub108 (@Async)",id:"step-3-\uc774\ubca4\ud2b8-\ub9ac\uc2a4\ub108-async",level:3},{value:"Step 4: ThreadPoolTaskExecutor \uc124\uc815",id:"step-4-threadpooltaskexecutor-\uc124\uc815",level:3},{value:"3. \uc131\ub2a5 \uce21\uc815",id:"3-\uc131\ub2a5-\uce21\uc815",level:2},{value:"\uce21\uc815 \ubc29\ubc95",id:"\uce21\uc815-\ubc29\ubc95",level:3},{value:"\uacb0\uacfc",id:"\uacb0\uacfc",level:3},{value:"4. TO-BE \uc544\ud0a4\ud14d\ucc98",id:"4-to-be-\uc544\ud0a4\ud14d\ucc98",level:2},{value:"5. \ud575\uc2ec \uac1c\uc120 \ud3ec\uc778\ud2b8",id:"5-\ud575\uc2ec-\uac1c\uc120-\ud3ec\uc778\ud2b8",level:2},{value:"1\ufe0f\u20e3 \uc774\ubca4\ud2b8 \uae30\ubc18 \uc544\ud0a4\ud14d\ucc98 (EDA)",id:"1\ufe0f\u20e3-\uc774\ubca4\ud2b8-\uae30\ubc18-\uc544\ud0a4\ud14d\ucc98-eda",level:3},{value:"2\ufe0f\u20e3 @Async \ube44\ub3d9\uae30 \ucc98\ub9ac",id:"2\ufe0f\u20e3-async-\ube44\ub3d9\uae30-\ucc98\ub9ac",level:3},{value:"3\ufe0f\u20e3 ThreadPoolTaskExecutor \ud29c\ub2dd",id:"3\ufe0f\u20e3-threadpooltaskexecutor-\ud29c\ub2dd",level:3},{value:"6. \ucd94\uac00 \uace0\ub824\uc0ac\ud56d",id:"6-\ucd94\uac00-\uace0\ub824\uc0ac\ud56d",level:2},{value:"\uc774\uba54\uc77c \ubc1c\uc1a1 \uc2e4\ud328 \ucc98\ub9ac",id:"\uc774\uba54\uc77c-\ubc1c\uc1a1-\uc2e4\ud328-\ucc98\ub9ac",level:3},{value:"7. \uacb0\ub860",id:"7-\uacb0\ub860",level:2},{value:"8. \ucc38\uace0 \uc790\ub8cc",id:"8-\ucc38\uace0-\uc790\ub8cc",level:2},{value:"9. PR",id:"9-pr",level:2}];function o(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"\uc774\uba54\uc77c-\ubc1c\uc1a1-api-\uc751\ub2f5-\uc18d\ub3c4-92-\uac1c\uc120",children:"\uc774\uba54\uc77c \ubc1c\uc1a1 API \uc751\ub2f5 \uc18d\ub3c4 92% \uac1c\uc120"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["Spring Event + @Async\ub97c \ud65c\uc6a9\ud55c \ube44\ub3d9\uae30 \ucc98\ub9ac\ub85c ",(0,t.jsx)(n.strong,{children:"2.5\ucd08 \u2192 0.2\ucd08"})," \ub2ec\uc131"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"0-\uac1c\uc694",children:"0. \uac1c\uc694"}),"\n",(0,t.jsx)(n.admonition,{title:"\ubb38\uc81c \uc0c1\ud669",type:"danger",children:(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["JavaMailSender.send()\uac00 ",(0,t.jsx)(n.strong,{children:"\ub3d9\uae30 \ube14\ub85c\ud0b9 \ubc29\uc2dd"})]}),"\n",(0,t.jsx)(n.li,{children:"SMTP \uc11c\ubc84 \uc751\ub2f5 \ub300\uae30 \uc2dc\uac04 (\ud3c9\uade0 2~3\ucd08)"}),"\n",(0,t.jsx)(n.li,{children:"\uc0ac\uc6a9\uc790\ub294 \uc774\uba54\uc77c \ubc1c\uc1a1 \uc644\ub8cc\uae4c\uc9c0 \ub300\uae30"}),"\n"]})}),"\n",(0,t.jsx)(n.admonition,{title:"\ud574\uacb0 \ubc29\ud5a5",type:"tip",children:(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Spring Event\ub97c \ubc1c\ud589\ud558\uc5ec \ube44\ub3d9\uae30 \ucc98\ub9ac"}),"\n",(0,t.jsx)(n.li,{children:"@Async\ub85c \ubcc4\ub3c4 \uc2a4\ub808\ub4dc\uc5d0\uc11c \uc774\uba54\uc77c \ubc1c\uc1a1"}),"\n",(0,t.jsx)(n.li,{children:"ThreadPoolTaskExecutor\ub85c \uc2a4\ub808\ub4dc \ud480 \uad00\ub9ac"}),"\n"]})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"1-\ubb38\uc81c-\ubd84\uc11d",children:"1. \ubb38\uc81c \ubd84\uc11d"}),"\n",(0,t.jsx)(n.h3,{id:"as-is-\ub3d9\uae30-\ube14\ub85c\ud0b9-\ubc29\uc2dd",children:"AS-IS: \ub3d9\uae30 \ube14\ub85c\ud0b9 \ubc29\uc2dd"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"@Service\r\npublic class VerificationService {\r\n\r\n    public void createAndSendCode(String email, VerificationType type) {\r\n        String code = generateRandomCode();\r\n        redisService.saveCode(email, code, type);  // 0.1\ucd08\r\n\r\n        // \ub3d9\uae30 \ube14\ub85c\ud0b9 - SMTP \uc11c\ubc84 \uc751\ub2f5 \ub300\uae30\r\n        emailService.sendVerificationCode(email, code, type);  // 2.4\ucd08\r\n\r\n        // \ucd1d \uc751\ub2f5 \uc2dc\uac04: 2.5\ucd08\r\n    }\r\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\ubb38\uc81c\uc810"})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"API \uc751\ub2f5\uc774 \uc774\uba54\uc77c \ubc1c\uc1a1 \uc644\ub8cc\uae4c\uc9c0 \ube14\ub85c\ud0b9"}),"\n",(0,t.jsx)(n.li,{children:"SMTP \uc11c\ubc84 \uc751\ub2f5\uc774 \ub290\ub9ac\uba74 \uc0ac\uc6a9\uc790 \ub300\uae30 \uc2dc\uac04 \uc99d\uac00"}),"\n",(0,t.jsx)(n.li,{children:"\ub3d9\uc2dc \uc694\uccad \uc2dc \ucc98\ub9ac\ub7c9 \uac10\uc18c"}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"2-\ud574\uacb0-\uacfc\uc815",children:"2. \ud574\uacb0 \uacfc\uc815"}),"\n",(0,t.jsx)(n.h3,{id:"step-1-spring-event-\uc124\uacc4",children:"Step 1: Spring Event \uc124\uacc4"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"// \uc774\ubca4\ud2b8 \ud074\ub798\uc2a4\r\npublic class VerificationCodeCreatedEvent extends ApplicationEvent {\r\n    private final String email;\r\n    private final String code;\r\n    private final VerificationType type;\r\n\r\n    public VerificationCodeCreatedEvent(\r\n        Object source,\r\n        String email,\r\n        String code,\r\n        VerificationType type\r\n    ) {\r\n        super(source);\r\n        this.email = email;\r\n        this.code = code;\r\n        this.type = type;\r\n    }\r\n\r\n    // getters\r\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"step-2-\uc774\ubca4\ud2b8-\ubc1c\ud589",children:"Step 2: \uc774\ubca4\ud2b8 \ubc1c\ud589"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@Service\r\npublic class VerificationService {\r\n    private final ApplicationEventPublisher eventPublisher;\r\n\r\n    public void createAndSendCode(String email, VerificationType type) {\r\n        String code = generateRandomCode();\r\n        redisService.saveCode(email, code, type);  // Redis \uc800\uc7a5 (\ub3d9\uae30)\r\n\r\n        // \uc774\ubca4\ud2b8 \ubc1c\ud589 (\ube44\ub3d9\uae30)\r\n        eventPublisher.publishEvent(\r\n            new VerificationCodeCreatedEvent(this, email, code, type)\r\n        );\r\n\r\n        log.info("\uc778\uc99d\ucf54\ub4dc \uc0dd\uc131 \uc644\ub8cc: email={}", email);\r\n        // \uc5ec\uae30\uc11c \uc989\uc2dc \uc751\ub2f5 \ubc18\ud658 (\ucd1d 0.2\ucd08)\r\n    }\r\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"step-3-\uc774\ubca4\ud2b8-\ub9ac\uc2a4\ub108-async",children:"Step 3: \uc774\ubca4\ud2b8 \ub9ac\uc2a4\ub108 (@Async)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@Component\r\npublic class VerificationCodeEventListener {\r\n    private final EmailService emailService;\r\n\r\n    @Async("emailTaskExecutor")  // \ubcc4\ub3c4 \uc2a4\ub808\ub4dc \ud480\uc5d0\uc11c \uc2e4\ud589\r\n    @EventListener\r\n    public void handleVerificationCodeCreated(\r\n        VerificationCodeCreatedEvent event\r\n    ) {\r\n        try {\r\n            emailService.sendVerificationCode(\r\n                event.getEmail(),\r\n                event.getCode(),\r\n                event.getType()\r\n            );\r\n            log.info("\uc774\uba54\uc77c \ubc1c\uc1a1 \uc644\ub8cc: email={}", event.getEmail());\r\n        } catch (Exception e) {\r\n            log.error("\uc774\uba54\uc77c \ubc1c\uc1a1 \uc2e4\ud328: email={}", event.getEmail(), e);\r\n            // \uc2e4\ud328 \uc2dc \uc7ac\uc2dc\ub3c4 \ub85c\uc9c1 \ub610\ub294 \uc54c\ub9bc \ucc98\ub9ac\r\n        }\r\n    }\r\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"step-4-threadpooltaskexecutor-\uc124\uc815",children:"Step 4: ThreadPoolTaskExecutor \uc124\uc815"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@Configuration\r\n@EnableAsync\r\npublic class AsyncConfig {\r\n\r\n    @Bean(name = "emailTaskExecutor")\r\n    public Executor emailTaskExecutor() {\r\n        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();\r\n        executor.setCorePoolSize(2);        // \uae30\ubcf8 \uc2a4\ub808\ub4dc \uc218\r\n        executor.setMaxPoolSize(5);         // \ucd5c\ub300 \uc2a4\ub808\ub4dc \uc218\r\n        executor.setQueueCapacity(100);     // \ub300\uae30 \ud050 \ud06c\uae30\r\n        executor.setThreadNamePrefix("email-async-");\r\n        executor.setRejectedExecutionHandler(new ThreadPoolExecutor.CallerRunsPolicy());\r\n        executor.initialize();\r\n        return executor;\r\n    }\r\n}\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"3-\uc131\ub2a5-\uce21\uc815",children:"3. \uc131\ub2a5 \uce21\uc815"}),"\n",(0,t.jsx)(n.h3,{id:"\uce21\uc815-\ubc29\ubc95",children:"\uce21\uc815 \ubc29\ubc95"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"JMeter: \ub3d9\uc2dc \uc0ac\uc6a9\uc790 50\uba85, \uac01 10\ud68c \uc694\uccad"}),"\n",(0,t.jsx)(n.li,{children:"API: POST /api/auth/email/verification"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"\uacb0\uacfc",children:"\uacb0\uacfc"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"\ud56d\ubaa9"}),(0,t.jsx)(n.th,{children:"Before (\ub3d9\uae30)"}),(0,t.jsx)(n.th,{children:"After (\ube44\ub3d9\uae30)"}),(0,t.jsx)(n.th,{children:"\uac1c\uc120\uc728"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"\ud3c9\uade0 \uc751\ub2f5\uc2dc\uac04"})}),(0,t.jsx)(n.td,{children:"2.5\ucd08"}),(0,t.jsx)(n.td,{children:"0.2\ucd08"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"92% \u2193"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"95 percentile"})}),(0,t.jsx)(n.td,{children:"3.2\ucd08"}),(0,t.jsx)(n.td,{children:"0.3\ucd08"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"90% \u2193"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"\ucc98\ub9ac\ub7c9 (TPS)"})}),(0,t.jsx)(n.td,{children:"10 req/s"}),(0,t.jsx)(n.td,{children:"100+ req/s"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"10\ubc30 \u2191"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"\ub3d9\uc2dc \ucc98\ub9ac \uac00\ub2a5 \uc218"})}),(0,t.jsx)(n.td,{children:"10\uba85"}),(0,t.jsx)(n.td,{children:"100\uba85+"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"10\ubc30 \u2191"})})]})]})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"4-to-be-\uc544\ud0a4\ud14d\ucc98",children:"4. TO-BE \uc544\ud0a4\ud14d\ucc98"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'[Client \uc694\uccad]\r\n     \u2193\r\n[Controller] \u2190 0.2\ucd08 \ud6c4 \uc989\uc2dc \uc751\ub2f5\r\n     \u2193\r\n[VerificationService]\r\n  \u251c\u2500 Redis \uc800\uc7a5 (0.1\ucd08)\r\n  \u2514\u2500 Event \ubc1c\ud589 (0.1\ucd08) \u2190 \uc5ec\uae30\uc11c \ubc18\ud658\r\n           \u2193\r\n[ApplicationEventPublisher]\r\n           \u2193\r\n    [emailTaskExecutor] \u2190 \ubcc4\ub3c4 \uc2a4\ub808\ub4dc \ud480\r\n           \u2193\r\n[VerificationCodeEventListener]\r\n  @Async("emailTaskExecutor")\r\n           \u2193\r\n[EmailService.sendMail()] \u2190 2.4\ucd08 (\uc0ac\uc6a9\uc790\ub294 \ub300\uae30 \uc548 \ud568)\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"5-\ud575\uc2ec-\uac1c\uc120-\ud3ec\uc778\ud2b8",children:"5. \ud575\uc2ec \uac1c\uc120 \ud3ec\uc778\ud2b8"}),"\n",(0,t.jsx)(n.h3,{id:"1\ufe0f\u20e3-\uc774\ubca4\ud2b8-\uae30\ubc18-\uc544\ud0a4\ud14d\ucc98-eda",children:"1\ufe0f\u20e3 \uc774\ubca4\ud2b8 \uae30\ubc18 \uc544\ud0a4\ud14d\ucc98 (EDA)"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u2705 \uc774\uba54\uc77c \ubc1c\uc1a1 \ub85c\uc9c1\uc744 ",(0,t.jsx)(n.strong,{children:"\ubcc4\ub3c4 \uc774\ubca4\ud2b8\ub85c \ubd84\ub9ac"})]}),"\n",(0,t.jsxs)(n.li,{children:["\u2705 API \uc751\ub2f5\uacfc \uc774\uba54\uc77c \ubc1c\uc1a1\uc774 ",(0,t.jsx)(n.strong,{children:"\ub290\uc2a8\ud558\uac8c \uacb0\ud569"})]}),"\n",(0,t.jsx)(n.li,{children:"\u2705 \uc774\uba54\uc77c \ubc1c\uc1a1 \uc2e4\ud328 \uc2dc\uc5d0\ub3c4 \uc0ac\uc6a9\uc790 \uc751\ub2f5\uc5d0 \uc601\ud5a5 \uc5c6\uc74c"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"2\ufe0f\u20e3-async-\ube44\ub3d9\uae30-\ucc98\ub9ac",children:"2\ufe0f\u20e3 @Async \ube44\ub3d9\uae30 \ucc98\ub9ac"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u2705 \ubcc4\ub3c4 \uc2a4\ub808\ub4dc\uc5d0\uc11c \uc774\uba54\uc77c \ubc1c\uc1a1"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 \uba54\uc778 \uc2a4\ub808\ub4dc\ub294 \uc989\uc2dc \ubc18\ud658"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 \uc2a4\ub808\ub4dc \ud480\ub85c \ub3d9\uc2dc \uc694\uccad \uc548\uc815\uc801 \ucc98\ub9ac"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"3\ufe0f\u20e3-threadpooltaskexecutor-\ud29c\ub2dd",children:"3\ufe0f\u20e3 ThreadPoolTaskExecutor \ud29c\ub2dd"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"CorePoolSize: 2       // \ud56d\uc0c1 \uc0b4\uc544\uc788\ub294 \uc2a4\ub808\ub4dc\r\nMaxPoolSize: 5        // \ubd80\ud558 \uc2dc \uc99d\uac00 \uac00\ub2a5\ud55c \ucd5c\ub300 \uc2a4\ub808\ub4dc\r\nQueueCapacity: 100    // \ub300\uae30 \uc791\uc5c5 \ud050 \ud06c\uae30\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\ub3d9\uc791 \uc6d0\ub9ac"})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"\uc694\uccad 2\uac1c \uc774\ud558: CorePoolSize \uc2a4\ub808\ub4dc \uc0ac\uc6a9"}),"\n",(0,t.jsx)(n.li,{children:"\uc694\uccad 2~102\uac1c: \ud050\uc5d0 \ub300\uae30 (100\uac1c)"}),"\n",(0,t.jsx)(n.li,{children:"\uc694\uccad 102\uac1c \ucd08\uacfc: MaxPoolSize\uae4c\uc9c0 \uc2a4\ub808\ub4dc \uc99d\uac00 (\ucd5c\ub300 5\uac1c)"}),"\n",(0,t.jsx)(n.li,{children:"\uc694\uccad 107\uac1c \ucd08\uacfc: RejectedExecutionHandler \uc2e4\ud589 (CallerRunsPolicy)"}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"6-\ucd94\uac00-\uace0\ub824\uc0ac\ud56d",children:"6. \ucd94\uac00 \uace0\ub824\uc0ac\ud56d"}),"\n",(0,t.jsx)(n.h3,{id:"\uc774\uba54\uc77c-\ubc1c\uc1a1-\uc2e4\ud328-\ucc98\ub9ac",children:"\uc774\uba54\uc77c \ubc1c\uc1a1 \uc2e4\ud328 \ucc98\ub9ac"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@Async("emailTaskExecutor")\r\n@EventListener\r\npublic void handleVerificationCodeCreated(VerificationCodeCreatedEvent event) {\r\n    int maxRetries = 3;\r\n    int retryCount = 0;\r\n\r\n    while (retryCount < maxRetries) {\r\n        try {\r\n            emailService.sendVerificationCode(\r\n                event.getEmail(),\r\n                event.getCode(),\r\n                event.getType()\r\n            );\r\n            log.info("\uc774\uba54\uc77c \ubc1c\uc1a1 \uc131\uacf5: email={}", event.getEmail());\r\n            return;\r\n        } catch (Exception e) {\r\n            retryCount++;\r\n            log.warn("\uc774\uba54\uc77c \ubc1c\uc1a1 \uc2e4\ud328 ({}\ud68c \uc7ac\uc2dc\ub3c4): email={}", retryCount, event.getEmail());\r\n\r\n            if (retryCount >= maxRetries) {\r\n                log.error("\uc774\uba54\uc77c \ubc1c\uc1a1 \ucd5c\uc885 \uc2e4\ud328: email={}", event.getEmail(), e);\r\n                // \uc2ac\ub799 \uc54c\ub9bc \ub610\ub294 DB \ub85c\uadf8 \uc800\uc7a5\r\n            } else {\r\n                Thread.sleep(1000 * retryCount);  // \uc9c0\uc218 \ubc31\uc624\ud504\r\n            }\r\n        }\r\n    }\r\n}\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"7-\uacb0\ub860",children:"7. \uacb0\ub860"}),"\n",(0,t.jsx)(n.admonition,{title:"\uc131\uacfc",type:"success",children:(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["API \uc751\ub2f5 \uc2dc\uac04 ",(0,t.jsx)(n.strong,{children:"2.5\ucd08 \u2192 0.2\ucd08"})," (92% \uac1c\uc120)"]}),"\n",(0,t.jsx)(n.li,{children:"\uc774\uba54\uc77c \ubc1c\uc1a1 \uc2e4\ud328 \uc2dc\uc5d0\ub3c4 \uc0ac\uc6a9\uc790 \uc751\ub2f5\uc5d0 \uc601\ud5a5 \uc5c6\uc74c"}),"\n",(0,t.jsx)(n.li,{children:"\uc2a4\ub808\ub4dc \ud480\ub85c \ub3d9\uc2dc \ubc1c\uc1a1 \uc694\uccad \uc548\uc815\uc801 \ucc98\ub9ac"}),"\n"]})}),"\n",(0,t.jsx)(n.admonition,{title:"\ubc30\uc6b4 \uc810",type:"tip",children:(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\uc774\ubca4\ud2b8 \uae30\ubc18 \uc544\ud0a4\ud14d\ucc98"}),"\uc758 \ud6a8\uacfc\ub97c \uc9c1\uc811 \uccb4\uac10"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"@Async\uc758 \uc62c\ubc14\ub978 \uc0ac\uc6a9\ubc95"})," (ThreadPoolTaskExecutor \uc124\uc815)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\ube44\ub3d9\uae30 \ucc98\ub9ac \uc2dc \uc608\uc678 \ucc98\ub9ac"}),"\uc758 \uc911\uc694\uc131"]}),"\n"]})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"8-\ucc38\uace0-\uc790\ub8cc",children:"8. \ucc38\uace0 \uc790\ub8cc"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://docs.spring.io/spring-framework/reference/core/beans/context-introduction.html#context-functionality-events",children:"Spring Framework - Event Publishing"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://docs.spring.io/spring-framework/reference/integration/scheduling.html",children:"Spring Framework - Task Execution and Scheduling"})}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"9-pr",children:"9. PR"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://github.com/JocketDan/jocketdanBackend/pull/34",children:"\uad00\ub828 PR"})})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},8453(e,n,r){r.d(n,{R:()=>s,x:()=>c});var i=r(6540);const t={},l=i.createContext(t);function s(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);