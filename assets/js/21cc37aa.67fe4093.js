"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[574],{887(e,t,n){n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>d,frontMatter:()=>a,metadata:()=>r,toc:()=>u});const r=JSON.parse('{"id":"projects/security-ticket/troubleshooting/code_Native-Query","title":"code_Native-Query","description":"Native Query","source":"@site/docs/projects/security-ticket/troubleshooting/code_Native-Query.md","sourceDirName":"projects/security-ticket/troubleshooting","slug":"/projects/security-ticket/troubleshooting/code_Native-Query","permalink":"/docs/projects/security-ticket/troubleshooting/code_Native-Query","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"code_LoginService","permalink":"/docs/projects/security-ticket/troubleshooting/code_LoginService"},"next":{"title":"code_SessionConfig","permalink":"/docs/projects/security-ticket/troubleshooting/code_SessionConfig"}}');var o=n(4848),i=n(8453);const a={},s=void 0,c={},u=[{value:"Native Query",id:"native-query",level:3}];function l(e){const t={code:"code",h3:"h3",pre:"pre",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.h3,{id:"native-query",children:"Native Query"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-java",children:'public interface UserRepository extends JpaRepository<User, Long> {\r\n    @Query(value = """\r\n        SELECT\r\n            u.name AS userName,\r\n            u.email AS userEmail,\r\n            c.phone_number AS clientPhone,\r\n            co.name AS companyName,\r\n            co.business_number AS businessNumber\r\n        FROM user u\r\n        LEFT JOIN client c ON u.client_id = c.client_id\r\n        LEFT JOIN company co ON c.company_id = co.company_id\r\n        WHERE u.client_id IS NOT NULL\r\n          AND (:keyword IS NULL\r\n               OR (:range = \'companyName\' AND co.name LIKE CONCAT(\'%\', :keyword, \'%\')))\r\n          AND (:startDate IS NULL OR u.last_login_at >= :startDate)\r\n          AND (:endDate IS NULL OR u.last_login_at <= :endDate)\r\n        ORDER BY u.last_login_at DESC\r\n        """,\r\n        nativeQuery = true)\r\n    Page<ResponseClientDto> searchClients(\r\n        @Param("startDate") LocalDateTime startDate,\r\n        @Param("endDate") LocalDateTime endDate,\r\n        @Param("range") String range,\r\n        @Param("keyword") String keyword,\r\n        Pageable pageable\r\n    );\r\n}\n'})})]})}function d(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},8453(e,t,n){n.d(t,{R:()=>a,x:()=>s});var r=n(6540);const o={},i=r.createContext(o);function a(e){const t=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),r.createElement(i.Provider,{value:t},e.children)}}}]);